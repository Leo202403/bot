# 阿里云服务器解除国外访问限制指南

## 问题现象
- ✅ 国内网络可以正常访问 `http://43.100.52.142/`
- ❌ 使用VPN（国外IP）无法访问
- ❌ 国外用户无法访问

## 原因分析
阿里云安全组默认可能启用了**地域访问限制**，只允许中国大陆IP访问。

---

## 解决方案

### 方法1：修改阿里云安全组规则（推荐）

1. **登录阿里云控制台**
   - 访问：https://ecs.console.aliyun.com/

2. **进入安全组设置**
   - 左侧菜单 → 网络与安全 → 安全组
   - 找到你的ECS实例所在的安全组

3. **配置入方向规则**
   - 点击"配置规则" → "入方向"
   - 找到端口 **80** 的规则

4. **修改授权对象**
   - 当前可能是：`中国大陆` 或特定IP段
   - 修改为：**0.0.0.0/0**（允许所有IP访问）
   - 或添加新规则：
     - 端口范围：80/80
     - 授权对象：0.0.0.0/0
     - 描述：Web服务（全球访问）

5. **保存规则**
   - 点击"保存"，规则立即生效

---

### 方法2：使用阿里云DDoS高防（如果需要安全防护）

如果担心开放全球访问会被攻击，可以使用：
- **阿里云DDoS高防**：智能过滤恶意流量
- **CDN加速**：全球访问加速 + 安全防护
- **Web应用防火墙(WAF)**：防止SQL注入、XSS等攻击

---

### 方法3：服务器端检查（通常不需要）

```bash
# SSH登录服务器
ssh root@43.100.52.142

# 检查iptables规则
sudo iptables -L -n | grep 80

# 检查firewalld状态（Ubuntu通常用ufw）
sudo ufw status

# 如果ufw启用了，确保80端口开放
sudo ufw allow 80/tcp
```

---

## 验证方法

### 1. 使用在线工具测试
访问：https://www.websiteplanet.com/webtools/down-or-not/
输入：`http://43.100.52.142/`

### 2. 使用不同地区的VPN测试
- 美国VPN → 测试访问
- 欧洲VPN → 测试访问
- 日本VPN → 测试访问

### 3. 使用curl测试（从其他服务器）
```bash
curl -I http://43.100.52.142/
```

---

## 注意事项

⚠️ **安全建议**：
1. 如果只是个人测试，可以暂时开放全球访问
2. 如果是生产环境，建议：
   - 使用CDN（如阿里云CDN、Cloudflare）
   - 启用Web应用防火墙（WAF）
   - 配置访问频率限制
   - 监控异常流量

⚠️ **成本提示**：
- 开放全球访问后，流量可能增加
- 注意阿里云的流量计费（通常前5GB免费）

---

## 当前状态
- 服务器：正常运行 ✅
- 国内访问：正常 ✅
- 国外访问：**被阿里云安全组限制** ❌

## 推荐操作
立即修改阿里云安全组规则，将端口80的授权对象改为 `0.0.0.0/0`
