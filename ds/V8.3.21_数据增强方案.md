# V8.3.21 å¸‚åœºå¿«ç…§æ•°æ®å¢å¼ºæ–¹æ¡ˆ

## ğŸ¯ æ ¸å¿ƒç†å¿µ

**"æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”"** - ä¸å…¶ä¸æ–­è°ƒæ•´è®¡ç®—é€»è¾‘ï¼Œä¸å¦‚è®©AIçœ‹åˆ°æ›´çœŸå®ã€æ›´å®Œæ•´çš„å¸‚åœºç¯å¢ƒï¼Œè®©å®ƒè‡ªå·±å­¦ä¼šåˆ¤æ–­ã€‚

---

## ğŸ“Š å½“å‰æ•°æ®ç›˜ç‚¹

### å·²æœ‰æ•°æ®ï¼ˆè¾ƒå®Œå–„ï¼‰âœ…
1. **åŸºç¡€æ•°æ®**ï¼šOHLCVã€ä»·æ ¼ã€ATR
2. **æŠ€æœ¯æŒ‡æ ‡**ï¼šRSIã€MACDã€EMAï¼ˆ15m/1h/4hï¼‰
3. **æ”¯æ’‘é˜»åŠ›**ï¼šä»·æ ¼ã€å¼ºåº¦ã€ææ€§è½¬æ¢
4. **ä¿¡å·ç‰¹å¾**ï¼šPin Barã€Engulfingã€Breakoutã€Volume Surge
5. **YTCä¿¡å·**ï¼šBOF/BPB/TSTç±»å‹ã€å¼ºåº¦ã€ç†ç”±

### å…³é”®ç›²ç‚¹ï¼ˆéœ€è¦è¡¥å……ï¼‰âŒ

---

## ğŸ” æ•°æ®ç›²ç‚¹åˆ†æ

### **ç›²ç‚¹1ï¼šç¼ºå°‘å†å²ä¸Šä¸‹æ–‡ï¼ˆæœ€å…³é”®ï¼‰**

**é—®é¢˜**ï¼šå¿«ç…§åªä¿å­˜å•ä¸ªæ—¶é—´ç‚¹ï¼ŒAIçœ‹ä¸åˆ°"æ¥é¾™å»è„‰"

**ä¸¾ä¾‹**ï¼š
```
å½“å‰ä»·æ ¼ $3500
é˜»åŠ›ä½ $3600

é—®é¢˜ï¼š
- è¿™æ˜¯ç¬¬ä¸€æ¬¡æµ‹è¯•$3600å—ï¼Ÿï¼ˆå®¹æ˜“çªç ´ï¼‰
- è¿˜æ˜¯ç¬¬5æ¬¡æµ‹è¯•å¤±è´¥ï¼Ÿï¼ˆå¾ˆéš¾çªç ´ï¼‰
- åˆšä»$3200æ¶¨ä¸Šæ¥ï¼Ÿï¼ˆå¯èƒ½è¦å›è°ƒï¼‰
- è¿˜æ˜¯ä»$3800è·Œä¸‹æ¥ï¼Ÿï¼ˆå¯èƒ½ç»§ç»­è·Œï¼‰

â†’ AIæ— æ³•åˆ¤æ–­ï¼Œåªèƒ½ç›²ç›®æŒ‰R:Rè®¡ç®—
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **Kçº¿åºåˆ—ä¸Šä¸‹æ–‡**

```python
# æ–°å¢å­—æ®µï¼šè¿‘æœŸKçº¿åºåˆ—ï¼ˆæœ€è¿‘10-20æ ¹ï¼‰
"kline_sequence_15m": [
    {"time": "1100", "open": 3480, "high": 3500, "low": 3470, "close": 3495, "volume": 1200},
    {"time": "1115", "open": 3495, "high": 3510, "low": 3490, "close": 3505, "volume": 1500},
    # ... æœ€è¿‘10æ ¹Kçº¿
],

# æˆ–è€…æ›´ç®€æ´ï¼šåªä¿å­˜å…³é”®ä¿¡æ¯
"recent_candles": {
    "count": 10,
    "highest_high": 3520,
    "lowest_low": 3460,
    "avg_body_size": 15,  # å¹³å‡å®ä½“å¤§å°ï¼ˆ$ï¼‰
    "avg_range_size": 25,  # å¹³å‡æ³¢åŠ¨èŒƒå›´ï¼ˆ$ï¼‰
    "bullish_count": 6,   # é˜³çº¿æ•°é‡
    "bearish_count": 4,   # é˜´çº¿æ•°é‡
}
```

---

### **ç›²ç‚¹2ï¼šç¼ºå°‘å¸‚åœºç»“æ„ä¿¡æ¯**

**é—®é¢˜**ï¼šä¸çŸ¥é“å½“å‰åœ¨è¶‹åŠ¿çš„ä»€ä¹ˆé˜¶æ®µ

**ä¸¾ä¾‹**ï¼š
```
é—®é¢˜ï¼š
- è¿™æ³¢ä¸Šæ¶¨æŒç»­äº†å¤šä¹…ï¼Ÿï¼ˆ1å°æ—¶ vs 3å¤©ï¼‰
- æ¶¨å¹…æœ‰å¤šå¤§ï¼Ÿï¼ˆ3% vs 30%ï¼‰
- æ˜¯è¶‹åŠ¿åˆæœŸï¼ˆè¿˜æœ‰ç©ºé—´ï¼‰è¿˜æ˜¯æœ«æœŸï¼ˆè¦å›è°ƒï¼‰ï¼Ÿ
- é«˜ä½ç‚¹ç»“æ„ï¼šHH/HL/LH/LLï¼Ÿ

â†’ AIä¸çŸ¥é“è¯¥è¿½è¿˜æ˜¯è¯¥ç­‰
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **å¸‚åœºç»“æ„åˆ†æ**

```python
# æ–°å¢å­—æ®µï¼šå¸‚åœºç»“æ„
"market_structure_15m": {
    # è¶‹åŠ¿ä¿¡æ¯
    "trend_age_candles": 8,  # å½“å‰è¶‹åŠ¿æŒç»­äº†å‡ æ ¹Kçº¿
    "trend_age_hours": 2.0,  # æŒç»­æ—¶é—´ï¼ˆå°æ—¶ï¼‰
    "trend_move_pct": 5.2,   # è¶‹åŠ¿ç´¯è®¡æ¶¨è·Œå¹…ï¼ˆ%ï¼‰
    "trend_strength": "strong",  # weak/medium/strong
    
    # é«˜ä½ç‚¹ç»“æ„ï¼ˆæœ€è¿‘4ä¸ªé«˜ä½ç‚¹ï¼‰
    "swing_structure": "HH-HL-HH-HL",  # Higher High, Higher Low (ä¸Šå‡ç»“æ„)
    "last_swing_high": 3520,
    "last_swing_low": 3450,
    "swing_distance_pct": 2.1,  # æœ€è¿‘ä¸€ä¸ªæ‘†åŠ¨çš„å¹…åº¦
    
    # ä½ç½®ä¿¡æ¯
    "position_in_range": 0.75,  # åœ¨è¿‘æœŸåŒºé—´çš„ä½ç½®ï¼ˆ0=æœ€ä½ï¼Œ1=æœ€é«˜ï¼‰
    "distance_from_high": 1.2,  # è·ç¦»è¿‘æœŸé«˜ç‚¹çš„è·ç¦»ï¼ˆ%ï¼‰
    "distance_from_low": 3.8,   # è·ç¦»è¿‘æœŸä½ç‚¹çš„è·ç¦»ï¼ˆ%ï¼‰
},

"market_structure_1h": {
    # åŒæ ·çš„ç»“æ„ï¼Œä½†ä»1å°æ—¶è§†è§’
    "trend_age_hours": 12.0,
    "trend_move_pct": 8.5,
    # ...
},

"market_structure_4h": {
    # 4å°æ—¶è§†è§’
    "trend_age_hours": 36.0,
    "trend_move_pct": 15.2,
    # ...
}
```

---

### **ç›²ç‚¹3ï¼šç¼ºå°‘æ”¯æ’‘é˜»åŠ›çš„å†å²æµ‹è¯•ä¿¡æ¯**

**é—®é¢˜**ï¼šä¸çŸ¥é“æ”¯æ’‘/é˜»åŠ›çš„æœ‰æ•ˆæ€§

**ä¸¾ä¾‹**ï¼š
```
é˜»åŠ›ä½ $3600

é—®é¢˜ï¼š
- è¿™ä¸ªé˜»åŠ›ä½è¢«æµ‹è¯•è¿‡å‡ æ¬¡ï¼Ÿ
- æ¯æ¬¡æµ‹è¯•çš„ååº”å¦‚ä½•ï¼Ÿï¼ˆå¼ºåŠ›åå¼¹ vs è½»å¾®å›è°ƒï¼‰
- æœ€è¿‘ä¸€æ¬¡æµ‹è¯•æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ
- æœ‰æ²¡æœ‰å‡çªç ´çš„å†å²ï¼Ÿ

â†’ AIä¸çŸ¥é“è¿™ä¸ªé˜»åŠ›ä½çš„"ç¡¬åº¦"
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **æ”¯æ’‘é˜»åŠ›å†å²**

```python
# å¢å¼ºç°æœ‰çš„support/resistanceå­—æ®µ
"resistance_history": {
    "price": 3600,
    "strength": 5,
    "test_count": 3,  # è¢«æµ‹è¯•è¿‡3æ¬¡
    "last_test_ago_hours": 6,  # æœ€è¿‘ä¸€æ¬¡æµ‹è¯•åœ¨6å°æ—¶å‰
    "max_rejection_pct": -2.5,  # æœ€å¤§å›è°ƒå¹…åº¦ï¼ˆä»é˜»åŠ›ä½ï¼‰
    "avg_rejection_pct": -1.8,  # å¹³å‡å›è°ƒå¹…åº¦
    "breakout_attempts": 2,  # å°è¯•çªç ´æ¬¡æ•°
    "false_breakouts": 1,  # å‡çªç ´æ¬¡æ•°
    "description": "å¼ºé˜»åŠ›ï¼Œ3æ¬¡æµ‹è¯•ï¼Œ1æ¬¡å‡çªç ´"
},

"support_history": {
    "price": 3400,
    "strength": 4,
    "test_count": 2,
    "last_test_ago_hours": 12,
    "max_bounce_pct": 3.2,  # æœ€å¤§åå¼¹å¹…åº¦
    "avg_bounce_pct": 2.5,  # å¹³å‡åå¼¹å¹…åº¦
    "description": "ä¸­ç­‰æ”¯æ’‘ï¼Œ2æ¬¡æµ‹è¯•ï¼Œå¹³å‡åå¼¹2.5%"
}
```

---

### **ç›²ç‚¹4ï¼šç¼ºå°‘æ³¢åŠ¨ç‡å’Œæˆäº¤é‡çš„ä¸Šä¸‹æ–‡**

**é—®é¢˜**ï¼šä¸çŸ¥é“å½“å‰æ³¢åŠ¨ç‡/æˆäº¤é‡æ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸

**ä¸¾ä¾‹**ï¼š
```
å½“å‰ATR: $20
å½“å‰æˆäº¤é‡: 5000

é—®é¢˜ï¼š
- ATRæ˜¯åœ¨æ‰©å¤§ï¼ˆæ³¢åŠ¨ç‡å¢åŠ ï¼‰è¿˜æ˜¯æ”¶ç¼©ï¼Ÿ
- è¿™ä¸ªæˆäº¤é‡ç›¸å¯¹äºè¿‡å»7å¤©æ˜¯é«˜è¿˜æ˜¯ä½ï¼Ÿ
- æ³¢åŠ¨ç‡æ‰©å¼ é€šå¸¸é¢„ç¤ºè¶‹åŠ¿å¼€å§‹

â†’ AIæ— æ³•åˆ¤æ–­å¸‚åœºçš„"æƒ…ç»ªçŠ¶æ€"
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **æ³¢åŠ¨ç‡å’Œæˆäº¤é‡ä¸Šä¸‹æ–‡**

```python
# æ–°å¢å­—æ®µï¼šæ³¢åŠ¨ç‡ä¸Šä¸‹æ–‡
"volatility_context": {
    "current_atr": 20.5,
    "atr_7d_avg": 18.2,  # 7å¤©å¹³å‡
    "atr_percentile": 0.68,  # åœ¨è¿‡å»30å¤©çš„åˆ†ä½æ•°ï¼ˆ68%ï¼‰
    "atr_trend": "expanding",  # expanding/contracting/stable
    "atr_change_pct_1h": 5.2,  # ATR 1å°æ—¶å˜åŒ–ï¼ˆ%ï¼‰
    "atr_change_pct_4h": 12.3,  # ATR 4å°æ—¶å˜åŒ–ï¼ˆ%ï¼‰
    "is_high_volatility": false,  # æ˜¯å¦é«˜æ³¢åŠ¨æœŸï¼ˆ>80åˆ†ä½ï¼‰
    "is_low_volatility": false,  # æ˜¯å¦ä½æ³¢åŠ¨æœŸï¼ˆ<20åˆ†ä½ï¼‰
},

# æ–°å¢å­—æ®µï¼šæˆäº¤é‡ä¸Šä¸‹æ–‡
"volume_context": {
    "current_volume": 5000,
    "volume_7d_avg": 4200,
    "volume_percentile": 0.72,  # åœ¨è¿‡å»30å¤©çš„åˆ†ä½æ•°
    "volume_trend": "increasing",  # increasing/decreasing/stable
    "volume_ma5": 4500,  # 5å‘¨æœŸç§»åŠ¨å¹³å‡
    "volume_vs_ma5": 1.11,  # ç›¸å¯¹äºMA5çš„å€æ•°
    "consecutive_high_volume": 3,  # è¿ç»­é«˜æˆäº¤é‡å‘¨æœŸæ•°
    "price_volume_correlation": 0.85,  # ä»·æ ¼å’Œæˆäº¤é‡çš„ç›¸å…³æ€§ï¼ˆ-1åˆ°1ï¼‰
}
```

---

### **ç›²ç‚¹5ï¼šç¼ºå°‘ç›¸å¯¹å¼ºå¼±ä¿¡æ¯**

**é—®é¢˜**ï¼šä¸çŸ¥é“è¿™ä¸ªå¸ç§æ˜¯å¼ºåŠ¿è¿˜æ˜¯å¼±åŠ¿

**ä¸¾ä¾‹**ï¼š
```
ETHæ¶¨äº†3%

é—®é¢˜ï¼š
- BTCæ¶¨äº†å¤šå°‘ï¼Ÿï¼ˆå¦‚æœBTCæ¶¨5%ï¼ŒETHæ˜¯å¼±åŠ¿ï¼‰
- å…¶ä»–å¸ç§å‘¢ï¼Ÿï¼ˆå¤§ç›˜æ•´ä½“å¼ºè¿˜æ˜¯å¼±ï¼Ÿï¼‰
- æ˜¯é¢†æ¶¨è¿˜æ˜¯è¡¥æ¶¨ï¼Ÿ

â†’ AIä¸çŸ¥é“è¯¥ä¸è¯¥è¿½è¿™ä¸ªå¸ç§
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **ç›¸å¯¹å¼ºå¼±åˆ†æ**

```python
# æ–°å¢å­—æ®µï¼šç›¸å¯¹å¼ºå¼±
"relative_strength": {
    # ç›¸å¯¹äºBTC
    "vs_btc_1h": 1.15,  # 1å°æ—¶æ¶¨å¹…æ˜¯BTCçš„1.15å€
    "vs_btc_4h": 0.92,  # 4å°æ—¶æ¶¨å¹…æ˜¯BTCçš„0.92å€
    "vs_btc_24h": 1.05,
    "is_leading": true,  # æ˜¯å¦é¢†æ¶¨
    
    # ç›¸å¯¹äºå…¶ä»–å¸ç§
    "rank_1h": 2,  # 1å°æ—¶æ¶¨å¹…æ’åï¼ˆåœ¨æ‰€æœ‰å¸ç§ä¸­ï¼‰
    "rank_4h": 5,
    "rank_24h": 3,
    
    # å¸‚åœºä¸€è‡´æ€§
    "market_bullish_pct": 0.65,  # 65%çš„å¸ç§åœ¨ä¸Šæ¶¨
    "market_momentum": "strong_bullish",  # strong_bullish/bullish/neutral/bearish/strong_bearish
}
```

---

### **ç›²ç‚¹6ï¼šç¼ºå°‘è¶‹åŠ¿"è´¨é‡"è¯„ä¼°**

**é—®é¢˜**ï¼šåªçŸ¥é“æœ‰è¶‹åŠ¿ï¼Œä¸çŸ¥é“è¶‹åŠ¿çš„"å¥åº·åº¦"

**ä¸¾ä¾‹**ï¼š
```
15m/1h/4héƒ½æ˜¯å¤šå¤´

ä½†æ˜¯ï¼š
- æ˜¯å¦æœ‰èƒŒç¦»ï¼Ÿï¼ˆä»·æ ¼æ–°é«˜ï¼ŒMACDä¸åˆ›æ–°é«˜ï¼‰
- æ˜¯å¦æœ‰é‡ä»·èƒŒç¦»ï¼Ÿï¼ˆä»·æ ¼æ–°é«˜ï¼Œæˆäº¤é‡èç¼©ï¼‰
- è¶‹åŠ¿æ˜¯å¦ç–²è½¯ï¼Ÿï¼ˆè¿ç»­å¤šæ ¹ä¸Šå½±çº¿ï¼‰

â†’ AIä¸çŸ¥é“è¯¥ä¸è¯¥å…¥åœº
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **è¶‹åŠ¿è´¨é‡è¯„ä¼°**

```python
# æ–°å¢å­—æ®µï¼šè¶‹åŠ¿è´¨é‡
"trend_quality": {
    # èƒŒç¦»æ£€æµ‹
    "price_macd_divergence": false,  # ä»·æ ¼å’ŒMACDèƒŒç¦»
    "price_volume_divergence": true,  # ä»·æ ¼å’Œæˆäº¤é‡èƒŒç¦»ï¼ˆè­¦å‘Šä¿¡å·ï¼‰
    "rsi_divergence": false,
    
    # è¶‹åŠ¿å¥åº·åº¦ï¼ˆ0-100ï¼‰
    "health_score": 75,
    "health_factors": {
        "momentum_strong": true,  # åŠ¨é‡å¼ºåŠ²
        "volume_confirmed": true,  # æˆäº¤é‡ç¡®è®¤
        "no_divergence": false,  # æ— èƒŒç¦»ï¼ˆæœ‰èƒŒç¦»ï¼‰
        "trend_consistent": true,  # å¤šå‘¨æœŸä¸€è‡´
        "clean_structure": true,  # ç»“æ„æ¸…æ™°ï¼ˆæ— æ··ä¹±Kçº¿ï¼‰
    },
    
    # ç–²è½¯ä¿¡å·
    "exhaustion_signals": [
        "volume_declining",  # æˆäº¤é‡é€’å‡
        # "consecutive_doji",  # è¿ç»­åå­—æ˜Ÿï¼ˆæ— ï¼‰
        # "long_upper_shadows",  # è¿ç»­ä¸Šå½±çº¿ï¼ˆæ— ï¼‰
    ],
    
    # å»ºè®®
    "entry_confidence": "medium",  # low/medium/high
    "risk_level": "elevated",  # low/normal/elevated/high
}
```

---

### **ç›²ç‚¹7ï¼šç¼ºå°‘"æƒ…å¢ƒè®°å¿†"**

**é—®é¢˜**ï¼šAIæ²¡æœ‰çŸ­æœŸè®°å¿†ï¼Œä¸çŸ¥é“åˆšæ‰å‘ç”Ÿäº†ä»€ä¹ˆ

**ä¸¾ä¾‹**ï¼š
```
å½“å‰æ—¶åˆ»ï¼š15:45

ä½†AIä¸çŸ¥é“ï¼š
- 15:30åˆšå‘ç”Ÿè¿‡ä»€ä¹ˆï¼Ÿï¼ˆå¤§è·Œï¼Ÿçªç ´ï¼Ÿï¼‰
- è¿‡å»1å°æ—¶çš„"æ•…äº‹"æ˜¯ä»€ä¹ˆï¼Ÿ
- è¿ç»­3æ ¹Kçº¿çš„èµ°åŠ¿å¦‚ä½•ï¼Ÿ

â†’ AIæ¯æ¬¡éƒ½æ˜¯"å¤±å¿†"çŠ¶æ€
```

**è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ **çŸ­æœŸäº‹ä»¶è®°å½•**

```python
# æ–°å¢å­—æ®µï¼šæœ€è¿‘äº‹ä»¶ï¼ˆæœ€è¿‘1-2å°æ—¶ï¼‰
"recent_events": [
    {
        "time": "1530",
        "event": "resistance_test",
        "description": "æµ‹è¯•$3600é˜»åŠ›ä½ï¼Œå›è½2%",
        "impact": "medium"
    },
    {
        "time": "1500",
        "event": "volume_spike",
        "description": "æˆäº¤é‡æ¿€å¢3å€",
        "impact": "high"
    },
    {
        "time": "1430",
        "event": "support_bounce",
        "description": "åœ¨$3500æ”¯æ’‘ä½åå¼¹",
        "impact": "medium"
    }
],

# å½“å‰"æ•…äº‹çº¿"
"current_narrative": "ä»$3500æ”¯æ’‘ä½åå¼¹åä¸Šè¡Œï¼Œ1å°æ—¶å†…æµ‹è¯•$3600é˜»åŠ›2æ¬¡å‡å¤±è´¥ï¼Œå½“å‰åœ¨$3580æ•´ç†"
```

---

## ğŸš€ å®æ–½æ–¹æ¡ˆ

### **æ–¹æ¡ˆAï¼šå…¨é‡å®æ–½ï¼ˆæœ€å®Œæ•´ï¼Œä½†å·¥ä½œé‡å¤§ï¼‰**

å®æ–½æ‰€æœ‰7ä¸ªå¢å¼ºç‚¹ï¼Œé¢„è®¡ï¼š
- å¼€å‘æ—¶é—´ï¼š2-3å¤©
- æ–‡ä»¶å¤§å°å¢åŠ ï¼šçº¦2-3å€
- AIå†³ç­–è´¨é‡ï¼šæå‡50%+

### **æ–¹æ¡ˆBï¼šä¼˜å…ˆå®æ–½æ ¸å¿ƒ3é¡¹ï¼ˆæ¨èï¼‰â­**

åªå®æ–½æœ€å…³é”®çš„3ä¸ªå¢å¼ºç‚¹ï¼š
1. âœ… **ç›²ç‚¹1ï¼šKçº¿åºåˆ—ä¸Šä¸‹æ–‡**ï¼ˆæœ€é‡è¦ï¼‰
2. âœ… **ç›²ç‚¹2ï¼šå¸‚åœºç»“æ„ä¿¡æ¯**
3. âœ… **ç›²ç‚¹3ï¼šæ”¯æ’‘é˜»åŠ›å†å²**

é¢„è®¡ï¼š
- å¼€å‘æ—¶é—´ï¼š1å¤©
- æ–‡ä»¶å¤§å°å¢åŠ ï¼šçº¦50%
- AIå†³ç­–è´¨é‡ï¼šæå‡30%

### **æ–¹æ¡ˆCï¼šæœ€å°å®æ–½ï¼ˆå¿«é€Ÿè§æ•ˆï¼‰**

åªå®æ–½ç›²ç‚¹1ï¼ˆKçº¿åºåˆ—ä¸Šä¸‹æ–‡ï¼‰ï¼š
- å¼€å‘æ—¶é—´ï¼š4-6å°æ—¶
- æ–‡ä»¶å¤§å°å¢åŠ ï¼šçº¦20%
- AIå†³ç­–è´¨é‡ï¼šæå‡15-20%

---

## ğŸ“‹ æŠ€æœ¯å®ç°ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šKçº¿åºåˆ—ä¸Šä¸‹æ–‡ï¼ˆæ ¸å¿ƒï¼‰

```python
def get_kline_context(exchange, symbol, timeframe='15m', count=10):
    """
    è·å–æœ€è¿‘Næ ¹Kçº¿çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
    """
    try:
        klines = exchange.fetch_ohlcv(symbol, timeframe=timeframe, limit=count+1)
        
        if len(klines) < count:
            return None
        
        recent_klines = klines[-count:]
        
        # è®¡ç®—å…³é”®ç»Ÿè®¡
        highs = [k[2] for k in recent_klines]
        lows = [k[3] for k in recent_klines]
        closes = [k[4] for k in recent_klines]
        opens = [k[1] for k in recent_klines]
        volumes = [k[5] for k in recent_klines]
        
        bodies = [abs(c - o) for c, o in zip(closes, opens)]
        ranges = [h - l for h, l in zip(highs, lows)]
        
        bullish = sum(1 for c, o in zip(closes, opens) if c > o)
        bearish = count - bullish
        
        return {
            "count": count,
            "highest_high": max(highs),
            "lowest_low": min(lows),
            "avg_body_size": sum(bodies) / len(bodies),
            "avg_range_size": sum(ranges) / len(ranges),
            "avg_volume": sum(volumes) / len(volumes),
            "bullish_count": bullish,
            "bearish_count": bearish,
            "bullish_ratio": bullish / count,
            
            # åŠ¨é‡ä¿¡æ¯
            "price_change_pct": (closes[-1] - closes[0]) / closes[0] * 100,
            "is_trending_up": closes[-1] > closes[0] and closes[-1] > closes[-5],
            "is_trending_down": closes[-1] < closes[0] and closes[-1] < closes[-5],
            
            # æ³¢åŠ¨ä¿¡æ¯
            "volatility": (max(highs) - min(lows)) / min(lows) * 100,
        }
    except Exception as e:
        print(f"âš ï¸ è·å–Kçº¿ä¸Šä¸‹æ–‡å¤±è´¥: {e}")
        return None
```

### ç¤ºä¾‹2ï¼šå¸‚åœºç»“æ„åˆ†æ

```python
def analyze_market_structure(klines, timeframe='15m'):
    """
    åˆ†æå¸‚åœºç»“æ„ï¼ˆé«˜ä½ç‚¹åºåˆ—ã€è¶‹åŠ¿å¹´é¾„ç­‰ï¼‰
    """
    if len(klines) < 20:
        return None
    
    # è¯†åˆ«swingé«˜ä½ç‚¹ï¼ˆç®€åŒ–ç‰ˆï¼‰
    swing_highs = []
    swing_lows = []
    
    for i in range(2, len(klines)-2):
        high = klines[i][2]
        low = klines[i][3]
        
        # å¦‚æœæ¯”å‰å2æ ¹Kçº¿éƒ½é«˜ï¼Œæ˜¯swing high
        if high > max(klines[i-1][2], klines[i-2][2], klines[i+1][2], klines[i+2][2]):
            swing_highs.append((i, high))
        
        # å¦‚æœæ¯”å‰å2æ ¹Kçº¿éƒ½ä½ï¼Œæ˜¯swing low
        if low < min(klines[i-1][3], klines[i-2][3], klines[i+1][3], klines[i+2][3]):
            swing_lows.append((i, low))
    
    # åˆ¤æ–­ç»“æ„
    if len(swing_highs) >= 2 and len(swing_lows) >= 2:
        # HH-HL (ä¸Šå‡ç»“æ„)
        if swing_highs[-1][1] > swing_highs[-2][1] and swing_lows[-1][1] > swing_lows[-2][1]:
            structure = "HH-HL"
            trend_strength = "strong"
        # LL-LH (ä¸‹é™ç»“æ„)
        elif swing_highs[-1][1] < swing_highs[-2][1] and swing_lows[-1][1] < swing_lows[-2][1]:
            structure = "LL-LH"
            trend_strength = "strong"
        else:
            structure = "choppy"
            trend_strength = "weak"
    else:
        structure = "insufficient_data"
        trend_strength = "unknown"
    
    # è®¡ç®—è¶‹åŠ¿å¹´é¾„ï¼ˆä»æœ€è¿‘çš„swingç‚¹å¼€å§‹ï¼‰
    current_price = klines[-1][4]
    if swing_highs:
        last_swing = swing_highs[-1] if current_price < swing_highs[-1][1] else swing_lows[-1]
        trend_age_candles = len(klines) - last_swing[0] - 1
    else:
        trend_age_candles = 0
    
    return {
        "swing_structure": structure,
        "trend_strength": trend_strength,
        "trend_age_candles": trend_age_candles,
        "trend_age_hours": trend_age_candles * timeframe_to_hours(timeframe),
        "last_swing_high": swing_highs[-1][1] if swing_highs else 0,
        "last_swing_low": swing_lows[-1][1] if swing_lows else 0,
        # ... æ›´å¤šå­—æ®µ
    }
```

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ä¼˜åŒ–å‰ï¼ˆå½“å‰çŠ¶æ€ï¼‰
- ETHä¸Šæ¶¨æ•æ‰ç‡ï¼š6-13%
- AIå†³ç­–ä¾æ®ï¼šä¸»è¦é å•æ—¶é—´ç‚¹çš„æŠ€æœ¯æŒ‡æ ‡
- é—®é¢˜ï¼šçœ‹ä¸åˆ°"å¤§å±€"ï¼Œå®¹æ˜“è¢«å™ªéŸ³å¹²æ‰°

### ä¼˜åŒ–åï¼ˆå®æ–½æ–¹æ¡ˆBï¼‰
- ETHä¸Šæ¶¨æ•æ‰ç‡ï¼šé¢„æœŸæå‡åˆ°35-45%
- AIå†³ç­–ä¾æ®ï¼šå®Œæ•´çš„å¸‚åœºä¸Šä¸‹æ–‡ + å†å²è®°å¿†
- ä¼˜åŠ¿ï¼š
  - çŸ¥é“"æ¥é¾™å»è„‰"ï¼Œä¸å†ç›²ç›®
  - ç†è§£æ”¯æ’‘é˜»åŠ›çš„"ç¡¬åº¦"
  - è¯†åˆ«è¶‹åŠ¿çš„"é˜¶æ®µ"å’Œ"è´¨é‡"
  - æ›´æ™ºèƒ½çš„R:Rè¯„ä¼°

---

## ğŸ“Š æ•°æ®è´¨é‡å¯¹æ¯”

### ç¤ºä¾‹ï¼šåŒä¸€ä¸ªæ—¶åˆ»çš„æ•°æ®

**ä¼˜åŒ–å‰ï¼ˆå½“å‰ï¼‰**ï¼š
```json
{
  "time": "1545",
  "price": 3580,
  "trend_15m": "å¤šå¤´",
  "rsi_14": 65,
  "resistance": 3600,
  "risk_reward": 3.0
}
```
â†’ AIçœ‹åˆ°ï¼šä»·æ ¼3580ï¼Œæœ‰é˜»åŠ›åœ¨3600ï¼ŒR:R=3.0ï¼Œä¸æ»¡è¶³>3.5ï¼Œæ”¾å¼ƒ

**ä¼˜åŒ–åï¼ˆæ–¹æ¡ˆBï¼‰**ï¼š
```json
{
  "time": "1545",
  "price": 3580,
  "trend_15m": "å¤šå¤´",
  "rsi_14": 65,
  "resistance": 3600,
  "risk_reward": 3.0,
  
  // æ–°å¢ï¼šKçº¿ä¸Šä¸‹æ–‡
  "kline_context": {
    "recent_10_candles": "8æ ¹é˜³çº¿ï¼Œ2æ ¹é˜´çº¿",
    "price_change_pct": 3.2,
    "is_trending_up": true,
    "volatility": 2.5
  },
  
  // æ–°å¢ï¼šå¸‚åœºç»“æ„
  "market_structure": {
    "swing_structure": "HH-HL",
    "trend_age_hours": 2.5,
    "trend_move_pct": 3.5,
    "position_in_range": 0.75,
    "trend_strength": "strong"
  },
  
  // æ–°å¢ï¼šé˜»åŠ›å†å²
  "resistance_history": {
    "test_count": 2,
    "last_test_ago_hours": 1.0,
    "avg_rejection_pct": -1.5,
    "false_breakouts": 0,
    "description": "ä¸­ç­‰é˜»åŠ›ï¼Œ2æ¬¡æµ‹è¯•ï¼Œå¹³å‡å›è°ƒ1.5%"
  }
}
```
â†’ AIçœ‹åˆ°ï¼šè™½ç„¶R:R=3.0ï¼Œä½†è¿™æ˜¯å¼ºä¸Šå‡ç»“æ„ï¼ˆHH-HLï¼‰ï¼Œè¶‹åŠ¿å¹´è½»ï¼ˆ2.5å°æ—¶ï¼‰ï¼Œé˜»åŠ›åªæµ‹è¯•è¿‡2æ¬¡ä¸”æ— å‡çªç ´ï¼Œå¯ä»¥å°è¯•ï¼

---

## ğŸ’¡ æ‚¨çš„é€‰æ‹©

è¯·å‘Šè¯‰æˆ‘ï¼š

1. **æ–¹æ¡ˆA**ï¼šå…¨é‡å®æ–½ï¼ˆ7ä¸ªå¢å¼ºç‚¹ï¼‰- æœ€å®Œæ•´ï¼Œå·¥ä½œé‡æœ€å¤§
2. **æ–¹æ¡ˆB**ï¼šä¼˜å…ˆå®æ–½æ ¸å¿ƒ3é¡¹ï¼ˆæ¨èï¼‰â­ - å¹³è¡¡æ•ˆæœå’Œå·¥ä½œé‡
3. **æ–¹æ¡ˆC**ï¼šæœ€å°å®æ–½ï¼ˆä»…Kçº¿ä¸Šä¸‹æ–‡ï¼‰- å¿«é€Ÿè§æ•ˆ
4. **è‡ªå®šä¹‰**ï¼šé€‰æ‹©æ‚¨æœ€å…³å¿ƒçš„å¢å¼ºç‚¹

æˆ‘å·²ç»å‡†å¤‡å¥½å®æ–½ä»£ç äº†ï¼ğŸš€

