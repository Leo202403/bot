# è¿è¡Œæ¨¡å¼åˆ‡æ¢è¯´æ˜

## ğŸ“‹ é—®é¢˜

å‰ç«¯"æ¨¡å¼"æŒ‰é’®æ˜¾ç¤º **"æ¨¡å¼æœªçŸ¥"**ï¼Œæ— æ³•æ­£ç¡®è¯†åˆ«å½“å‰è¿è¡Œæ¨¡å¼ï¼ˆæµ‹è¯•æ¨¡å¼/å®ç›˜æ¨¡å¼ï¼‰ã€‚

## ğŸ” é—®é¢˜åŸå› 

1. **.envæ–‡ä»¶ç¼ºå°‘é…ç½®**: `.env` å’Œ `.env.qwen` æ–‡ä»¶ä¸­æ²¡æœ‰ `TEST_MODE` é…ç½®é¡¹
2. **è·¯å¾„é”™è¯¯**: `/trading-summary` API ä½¿ç”¨äº†é”™è¯¯çš„ `.env` è·¯å¾„ï¼ˆ`/home/admin` è€Œé `/root`ï¼‰

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. æ·»åŠ TEST_MODEé…ç½®åˆ°.envæ–‡ä»¶

**DeepSeek (.env)**:
```bash
# è¿è¡Œæ¨¡å¼é…ç½®
TEST_MODE=false  # false=å®ç›˜æ¨¡å¼, true=æµ‹è¯•æ¨¡å¼
```

**Qwen (.env.qwen)**:
```bash
# è¿è¡Œæ¨¡å¼é…ç½®  
TEST_MODE=false  # false=å®ç›˜æ¨¡å¼, true=æµ‹è¯•æ¨¡å¼
```

### 2. ä¿®å¤APIè·¯å¾„

ä¿®å¤ `trading_summary()` å‡½æ•°ä¸­çš„è·¯å¾„ï¼š

```python
# ä¿®å¤å‰
env_file = '/home/admin/10-23-bot/ds/.env' if model == 'deepseek' else '/home/admin/10-23-bot/ds/.env.qwen'

# ä¿®å¤å
env_file = '/root/10-23-bot/ds/.env' if model == 'deepseek' else '/root/10-23-bot/ds/.env.qwen'
```

## ğŸ“Š å½“å‰çŠ¶æ€

### APIæµ‹è¯•ç»“æœï¼š

```bash
# trading-summary
curl -s 'http://localhost/trading-summary?model=deepseek' | python3 -c "..."
# è¾“å‡º: test_mode: False âœ…

# trading-ai-status  
curl -s 'http://localhost/trading-ai-status?model=deepseek' | python3 -c "..."
# è¾“å‡º: test_mode: False âœ…
```

### å‰ç«¯æ˜¾ç¤ºï¼š

**æœŸæœ›æ˜¾ç¤º**:
- å½“ `TEST_MODE=false`: ğŸ”´ **å®ç›˜**
- å½“ `TEST_MODE=true`: ğŸ§ª **æµ‹è¯•**

**JavaScripté€»è¾‘**:
```javascript
function updateStatusButton(d){
    let modeText='ğŸ§ª æµ‹è¯•';
    if(d.test_mode===true){
        modeText='ğŸ§ª æµ‹è¯•'
    }else if(d.test_mode===false){
        modeText='ğŸ”´ å®ç›˜'
    }else{
        modeText='æ¨¡å¼æœªçŸ¥'
    }
    modeBtn.textContent=modeText;
    modeBtnMobile.textContent=modeText;
}
```

## ğŸ”„ å¦‚ä½•åˆ‡æ¢è¿è¡Œæ¨¡å¼

### æ–¹æ³•1: ç›´æ¥ä¿®æ”¹.envæ–‡ä»¶ï¼ˆæ¨èï¼‰

1. SSHç™»å½•æœåŠ¡å™¨
2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
   ```bash
   # DeepSeek
   vi /root/10-23-bot/ds/.env
   
   # Qwen
   vi /root/10-23-bot/ds/.env.qwen
   ```
3. ä¿®æ”¹ `TEST_MODE` å€¼ï¼š
   - `TEST_MODE=false` â†’ å®ç›˜æ¨¡å¼
   - `TEST_MODE=true` â†’ æµ‹è¯•æ¨¡å¼
4. é‡å¯AIæœºå™¨äººï¼š
   ```bash
   bash ~/å¿«é€Ÿé‡å¯_ä¿®å¤ç‰ˆ.sh bots
   ```

### æ–¹æ³•2: é€šè¿‡å‰ç«¯åˆ‡æ¢ï¼ˆåŠŸèƒ½æœªå®Œå…¨æµ‹è¯•ï¼‰

1. ç‚¹å‡»å‰ç«¯çš„"ğŸ”´ å®ç›˜"æˆ–"ğŸ§ª æµ‹è¯•"æŒ‰é’®
2. è¾“å…¥æ§åˆ¶å¯†ç 
3. ç³»ç»Ÿè‡ªåŠ¨ä¿®æ”¹.envæ–‡ä»¶å¹¶é‡å¯AI

**æ³¨æ„**: æ­¤åŠŸèƒ½éœ€è¦é…ç½®æ§åˆ¶å¯†ç ï¼Œè¯¦è§ `/trading-control` APIã€‚

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

### .envæ–‡ä»¶è·¯å¾„ï¼š
- **DeepSeek**: `/root/10-23-bot/ds/.env`
- **Qwen**: `/root/10-23-bot/ds/.env.qwen`

### å®Œæ•´.envç¤ºä¾‹ï¼š

```bash
DEEPSEEK_API_KEY=sk-***
DEEPSEEK_BASE_URL=https://api.deepseek.com
MODEL_NAME=deepseek

BINANCE_API_KEY=***
BINANCE_SECRET_KEY=***

EMAIL_SENDER=trading@example.com
EMAIL_PASSWORD=placeholder
EMAIL_RECEIVER=trading@example.com

# è¿è¡Œæ¨¡å¼é…ç½®
TEST_MODE=false  # false=å®ç›˜æ¨¡å¼, true=æµ‹è¯•æ¨¡å¼
```

## âš™ï¸ AIè„šæœ¬è¯»å–é€»è¾‘

AIè„šæœ¬ä»ç¯å¢ƒå˜é‡è¯»å–è¿è¡Œæ¨¡å¼ï¼š

```python
# ds/deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py (638è¡Œ)
"test_mode": os.getenv("TEST_MODE", "false").lower() == "true",
```

- é»˜è®¤å€¼: `false` (å®ç›˜æ¨¡å¼)
- è¯»å–é¡ºåº: ä» `.env` æ–‡ä»¶ â†’ ç¯å¢ƒå˜é‡

## ğŸ¯ æµ‹è¯•æ¨¡å¼ vs å®ç›˜æ¨¡å¼

| ç‰¹æ€§ | æµ‹è¯•æ¨¡å¼ | å®ç›˜æ¨¡å¼ |
|------|---------|---------|
| **äº¤æ˜“æ‰§è¡Œ** | æ¨¡æ‹Ÿäº¤æ˜“ | çœŸå®äº¤æ˜“ |
| **èµ„é‡‘é£é™©** | âŒ æ— é£é™© | âš ï¸ æœ‰é£é™© |
| **APIè°ƒç”¨** | ä¸å‘é€è®¢å• | çœŸå®ä¸‹å• |
| **æ•°æ®è®°å½•** | è®°å½•åˆ°CSV | è®°å½•åˆ°CSV |
| **æ¨é€é€šçŸ¥** | ä»ä¼šå‘é€ | æ­£å¸¸å‘é€ |

## ğŸ”’ å®‰å…¨å»ºè®®

1. **åˆæ¬¡éƒ¨ç½²**: å»ºè®®å…ˆä½¿ç”¨æµ‹è¯•æ¨¡å¼è¿è¡Œä¸€æ®µæ—¶é—´
2. **å‚æ•°è°ƒæ•´**: ä¿®æ”¹ç­–ç•¥å‚æ•°åï¼Œå…ˆæµ‹è¯•æ¨¡å¼éªŒè¯
3. **å®ç›˜åˆ‡æ¢**: ç¡®è®¤ç­–ç•¥ç¨³å®šåå†åˆ‡æ¢åˆ°å®ç›˜æ¨¡å¼
4. **èµ„é‡‘ç®¡ç†**: å®ç›˜æ¨¡å¼ä¸‹æ³¨æ„é£æ§å‚æ•°è®¾ç½®

## ğŸ“ åˆ‡æ¢ç¡®è®¤

åˆ‡æ¢æ¨¡å¼åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¡®è®¤ï¼š

### 1. å‰ç«¯æŒ‰é’®æ˜¾ç¤º
- ğŸ”´ **å®ç›˜** â†’ å®ç›˜æ¨¡å¼
- ğŸ§ª **æµ‹è¯•** â†’ æµ‹è¯•æ¨¡å¼

### 2. APIæŸ¥è¯¢
```bash
curl -s 'http://localhost/trading-ai-status?model=deepseek' | \
python3 -c "import sys, json; d=json.load(sys.stdin); print(f'Running mode: {\"Live\" if d.get(\"test_mode\") == False else \"Test\"}')"
```

### 3. æ—¥å¿—æ£€æŸ¥
```bash
# æŸ¥çœ‹AIå¯åŠ¨æ—¥å¿—
tail -100 /root/10-23-bot/ds/logs/deepseek_trading.log | grep -i "test"
```

---

**æ›´æ–°æ—¶é—´**: 2025-11-12 17:46 UTC  
**ç‰ˆæœ¬**: V8.3.25.8 Hotfix4  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

