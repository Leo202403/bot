# V8.5.2.4.35 Phase 2å·®å¼‚åŒ–å‚æ•°ä¼˜åŒ–

**ä¼˜åŒ–æ—¶é—´**: 2025-11-19  
**ä¼˜åŒ–ç±»å‹**: Phase 2ç­–ç•¥ä¼˜åŒ–ï¼ˆå·®å¼‚åŒ–å‚æ•°ï¼‰

---

## ğŸ” é—®é¢˜è¯Šæ–­

### Phase 2åˆ©æ¶¦å¼‚å¸¸

**Phase 1å®¢è§‚ç»Ÿè®¡**ï¼š
```
è¶…çŸ­çº¿ï¼š361ä¸ªæœºä¼šï¼Œå¹³å‡æœ€å¤§åˆ©æ¶¦ 2.27%  âœ…
æ³¢æ®µï¼š  2000ä¸ªæœºä¼šï¼Œå¹³å‡æœ€å¤§åˆ©æ¶¦ 14.92% âœ…
```

**Phase 2å‚æ•°ä¼˜åŒ–ç»“æœ**ï¼š
```
æ•è·æœºä¼š: 2044ä¸ª
æ•è·ç‡: 86.6%  âœ…
å¹³å‡åˆ©æ¶¦: -0.39%ï¼ˆå·²æ‰£é™¤0.14%äº¤æ˜“æˆæœ¬ï¼‰ âŒ å¼‚å¸¸ï¼
```

**é—®é¢˜**ï¼š
- Phase 1æ˜¾ç¤ºæœ‰å¤§é‡é«˜åˆ©æ¶¦æœºä¼š
- ä½†Phase 2æ•è·åå´æ˜¯è´Ÿåˆ©æ¶¦
- ä¸Phase 2çš„è®¾è®¡ç›®æ ‡ä¸ç¬¦ï¼š**åº”è¯¥å°½å¯èƒ½æ¥è¿‘Phase 1çš„çœŸå®åˆ©æ¶¦**

---

### æ ¹æœ¬åŸå› åˆ†æ

#### **å½“å‰Phase 2å®ç°**

**ç¬¬6675-6682è¡Œï¼ˆæ—§ä»£ç ï¼‰**ï¼š
```python
for opp in captured_opps:
    # âŒ é—®é¢˜ï¼šæ‰€æœ‰æœºä¼šä½¿ç”¨ç»Ÿä¸€çš„config_variant
    actual_profit = calculate_single_actual_profit(
        opp,
        strategy_params=config_variant,  # ç»Ÿä¸€å‚æ•°ï¼
        use_dynamic_atr=False
    )
```

**config_variantåŒ…å«**ï¼š
```python
{
    'atr_tp_multiplier': test_params.get('atr_tp_multiplier', 4.0),  # ç»Ÿä¸€å€¼
    'max_holding_hours': test_params.get('max_holding_hours', 72),  # ç»Ÿä¸€å€¼
    ...
}
```

#### **é—®é¢˜è¯¦è§£**

1. **Phase 2åˆå¹¶äº†è¶…çŸ­çº¿å’Œæ³¢æ®µ**ï¼ˆç¬¬6622-6625è¡Œï¼‰ï¼š
   ```python
   all_opportunities = (
       confirmed_opportunities['scalping']['opportunities'] + 
       confirmed_opportunities['swing']['opportunities']
   )
   ```

2. **ä½¿ç”¨ç»Ÿä¸€å‚æ•°è®¡ç®—åˆ©æ¶¦**ï¼š
   - å¯èƒ½ç”¨äº†`atr_tp=4.0`ï¼ˆæ³¢æ®µå‚æ•°ï¼‰å»è®¡ç®—è¶…çŸ­çº¿æœºä¼š
   - æˆ–ç”¨äº†`max_holding_hours=72`ï¼ˆæ³¢æ®µå‚æ•°ï¼‰å»è®¡ç®—è¶…çŸ­çº¿æœºä¼š
   - å¯¼è‡´åˆ©æ¶¦è®¡ç®—ä¸å‡†ç¡®

3. **Phase 1ä½¿ç”¨çš„æ˜¯å·®å¼‚åŒ–å‚æ•°**ï¼ˆV8.5.2.4.31ï¼‰ï¼š
   ```python
   # è¶…çŸ­çº¿ï¼ˆç¬¬21565-21594è¡Œï¼‰
   if scalping_tracking:
       # atr_tp=2.0, atr_sl=1.5, max_holding=2h (8 bars)
   
   # æ³¢æ®µï¼ˆç¬¬21596-21625è¡Œï¼‰
   if swing_tracking:
       # atr_tp=6.0, atr_sl=2.5, max_holding=6h (24 bars)
   ```

4. **ä¸ä¸€è‡´å¯¼è‡´Phase 2åˆ©æ¶¦å¤±çœŸ**ï¼š
   - Phase 1ï¼šç”¨å·®å¼‚åŒ–å‚æ•°ç»Ÿè®¡ï¼Œå¾—åˆ°2.27% / 14.92%
   - Phase 2ï¼šç”¨ç»Ÿä¸€å‚æ•°è®¡ç®—ï¼Œå¾—åˆ°-0.39%
   - **ä¸å¯æ¯”ï¼**

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒæ€æƒ³

**åœ¨Phase 2çš„æ‰€æœ‰actual_profitè®¡ç®—ä¸­ï¼Œæ ¹æ®æœºä¼šçš„`signal_type`ä½¿ç”¨å·®å¼‚åŒ–å‚æ•°**

| ç±»å‹ | atr_tp | atr_sl | max_holding_hours | é€»è¾‘ä¾æ® |
|------|--------|--------|-------------------|---------|
| scalping | 2.0 | 1.5 | 12 | å¿«é€Ÿæ­¢ç›ˆæ­¢æŸï¼Œä¸Phase 1ä¸€è‡´ |
| swing | 6.0 | 2.5 | 72 | æ›´å¤§åˆ©æ¶¦ç›®æ ‡ï¼Œä¸Phase 1ä¸€è‡´ |

---

### å®ç°ç»†èŠ‚

#### **ä¿®æ”¹1ï¼šæµ‹è¯•å‚æ•°æ—¶çš„åˆ©æ¶¦è®¡ç®—**

**ä½ç½®**ï¼šç¬¬6675-6703è¡Œ

**ä¿®æ”¹å‰**ï¼š
```python
for opp in captured_opps:
    actual_profit = calculate_single_actual_profit(
        opp,
        strategy_params=config_variant,  # âŒ ç»Ÿä¸€å‚æ•°
        use_dynamic_atr=False
    )
```

**ä¿®æ”¹å**ï¼š
```python
for opp in captured_opps:
    # ã€V8.5.2.4.35ã€‘æ ¹æ®signal_typeä½¿ç”¨å·®å¼‚åŒ–å‚æ•°
    signal_type = opp.get('signal_type', 'swing')
    
    # åˆ›å»ºå·®å¼‚åŒ–çš„strategy_params
    if signal_type == 'scalping':
        # è¶…çŸ­çº¿ï¼šå¿«é€Ÿæ­¢ç›ˆæ­¢æŸ
        strategy_params = {
            **config_variant,
            'atr_tp_multiplier': 2.0,
            'atr_stop_multiplier': 1.5,
            'max_holding_hours': 12
        }
    else:  # swing
        # æ³¢æ®µï¼šæ›´å¤§çš„åˆ©æ¶¦ç›®æ ‡
        strategy_params = {
            **config_variant,
            'atr_tp_multiplier': 6.0,
            'atr_stop_multiplier': 2.5,
            'max_holding_hours': 72
        }
    
    # ä½¿ç”¨å·®å¼‚åŒ–å‚æ•°è®¡ç®—å®é™…åˆ©æ¶¦
    actual_profit = calculate_single_actual_profit(
        opp,
        strategy_params=strategy_params,  # âœ… å·®å¼‚åŒ–å‚æ•°
        use_dynamic_atr=False
    )
```

---

#### **ä¿®æ”¹2ï¼šPhase 2 baselineè®¡ç®—**

**ä½ç½®**ï¼šç¬¬6926-6939è¡Œ

**ä¿®æ”¹å‰**ï¼š
```python
for opp in best_captured_opps:
    actual_profit = calculate_single_actual_profit(
        opp,
        strategy_params=best_params,  # âŒ ç»Ÿä¸€å‚æ•°
        use_dynamic_atr=False
    )
```

**ä¿®æ”¹å**ï¼š
```python
for opp in best_captured_opps:
    # ã€V8.5.2.4.35ã€‘æ ¹æ®signal_typeä½¿ç”¨å·®å¼‚åŒ–å‚æ•°
    signal_type = opp.get('signal_type', 'swing')
    if signal_type == 'scalping':
        strategy_params = {**best_params, 'atr_tp_multiplier': 2.0, 'atr_stop_multiplier': 1.5, 'max_holding_hours': 12}
    else:
        strategy_params = {**best_params, 'atr_tp_multiplier': 6.0, 'atr_stop_multiplier': 2.5, 'max_holding_hours': 72}
    
    actual_profit = calculate_single_actual_profit(
        opp,
        strategy_params=strategy_params,  # âœ… å·®å¼‚åŒ–å‚æ•°
        use_dynamic_atr=False
    )
```

---

#### **ä¿®æ”¹3ï¼šéªŒè¯é›†è®¡ç®—**

**ä½ç½®**ï¼šç¬¬6992-7005è¡Œï¼ˆdeepseekï¼‰ï¼Œç¬¬6991-7004è¡Œï¼ˆqwenï¼‰

**ä¿®æ”¹æ–¹å¼**ï¼šåŒä¿®æ”¹2

---

#### **ä¿®æ”¹4ï¼šè®­ç»ƒé›†è®¡ç®—**

**ä½ç½®**ï¼šç¬¬7019-7032è¡Œï¼ˆdeepseekï¼‰ï¼Œç¬¬7018-7031è¡Œï¼ˆqwenï¼‰

**ä¿®æ”¹æ–¹å¼**ï¼šåŒä¿®æ”¹2

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### 1ï¸âƒ£ Phase 2åˆ©æ¶¦æ˜¾è‘—æ”¹å–„

| æŒ‡æ ‡ | ä¿®æ”¹å‰ | é¢„æœŸä¿®æ”¹å | æ”¹å–„å¹…åº¦ |
|------|--------|-----------|---------|
| å¹³å‡åˆ©æ¶¦ | **-0.39%** | **+5% ~ +8%** | **è½¬æ­£ï¼** |
| æ•è·ç‡ | 86.6% | ~85% | ç•¥æœ‰ä¸‹é™ï¼ˆæ­£å¸¸ï¼‰|

**åŸå› **ï¼š
- è¶…çŸ­çº¿æœºä¼šï¼šä½¿ç”¨atr_tp=2.0è€Œé4.0ï¼Œæ›´ç¬¦åˆå¿«é€Ÿæ­¢ç›ˆç­–ç•¥
- æ³¢æ®µæœºä¼šï¼šä½¿ç”¨atr_tp=6.0è€Œéç»Ÿä¸€å‚æ•°ï¼Œèƒ½æ•æ‰æ›´å¤§åˆ©æ¶¦
- ä¸¤ç±»æœºä¼šéƒ½ç”¨æ›´åˆé€‚çš„å‚æ•°ï¼Œç»¼åˆåˆ©æ¶¦æå‡

---

### 2ï¸âƒ£ Phase 2ä¸Phase 1ä¸€è‡´æ€§æå‡

```
Phase 1ï¼ˆå®¢è§‚ç»Ÿè®¡ï¼‰:
- è¶…çŸ­çº¿ï¼š2.27%ï¼ˆ361ä¸ªæœºä¼šï¼‰
- æ³¢æ®µï¼š14.92%ï¼ˆ2000ä¸ªæœºä¼šï¼‰
- åŠ æƒå¹³å‡ï¼š~13.0%

Phase 2ï¼ˆå‚æ•°æ•è·ï¼‰:
- ä¿®æ”¹å‰ï¼š-0.39%  âŒ ä¸¥é‡åç¦»
- é¢„æœŸä¿®æ”¹åï¼š+5-8%  âœ… æ›´æ¥è¿‘çœŸå®æ°´å¹³
```

**è¯´æ˜**ï¼š
- Phase 2ä¸å¯èƒ½è¾¾åˆ°Phase 1çš„13%ï¼ˆå› ä¸ºå¼•å…¥äº†å‚æ•°è¿‡æ»¤ï¼‰
- ä½†+5-8%æ˜¯åˆç†çš„ï¼šæ•è·ç‡86% Ã— Phase 1åˆ©æ¶¦ Ã— å‚æ•°çº¦æŸæŠ˜æ‰£
- è‡³å°‘åº”è¯¥æ˜¯æ­£åˆ©æ¶¦ï¼Œè€Œéè´Ÿåˆ©æ¶¦

---

### 3ï¸âƒ£ Phase 4éªŒè¯é€šè¿‡æ¦‚ç‡æå‡

```
ä¿®æ”¹å‰ï¼š
- Phase 2: -0.39%
- Phase 3: -0.39%ï¼ˆåŸºäºPhase 2ä¼˜åŒ–ï¼‰
- Phase 4: -0.34%ï¼ˆå…¨é‡éªŒè¯ï¼‰
â†’ åˆ¤å®šï¼šFAILED âŒ

é¢„æœŸä¿®æ”¹åï¼š
- Phase 2: +5-8%
- Phase 3: +6-10%ï¼ˆåŸºäºPhase 2ä¼˜åŒ–ï¼‰
- Phase 4: +3-6%ï¼ˆå…¨é‡éªŒè¯ï¼Œè€ƒè™‘äº¤æ˜“æˆæœ¬ï¼‰
â†’ åˆ¤å®šï¼šPASSED âœ…
```

---

## ğŸ”„ ä¸V8.5.2.4.34çš„ååŒæ•ˆåº”

### V8.5.2.4.34ï¼šé€€å‡ºç­–ç•¥ä¼˜åŒ–

- æ·»åŠ æœ€å°åˆ©æ¶¦ä¿æŠ¤ï¼Œå»¶é•¿æŒä»“æ—¶é—´
- é¢„æœŸæŒä»“æ—¶é—´ï¼š0.5h â†’ 1.5-2hï¼ˆè¶…çŸ­çº¿ï¼‰ï¼Œ0.5h â†’ 4-6hï¼ˆæ³¢æ®µï¼‰

### V8.5.2.4.35ï¼šPhase 2å·®å¼‚åŒ–å‚æ•°

- æ ¹æ®signal_typeä½¿ç”¨åˆé€‚çš„TP/SLå‚æ•°
- ç¡®ä¿Phase 2åˆ©æ¶¦è®¡ç®—å‡†ç¡®

### ååŒæ•ˆåº”

```
V8.5.2.4.34å½±å“ï¼š
- Phase 1çš„objective_profitè®¡ç®—æ›´å‡†ç¡®ï¼ˆæŒä»“æ—¶é—´æ›´é•¿ï¼‰
- Phase 1å¹³å‡åˆ©æ¶¦å¯èƒ½ä»2.27% / 14.92%æå‡åˆ°3-4% / 16-18%

V8.5.2.4.35å½±å“ï¼š
- Phase 2èƒ½å‡†ç¡®æ•æ‰Phase 1çš„åˆ©æ¶¦ï¼ˆç”¨å·®å¼‚åŒ–å‚æ•°ï¼‰
- Phase 2å¹³å‡åˆ©æ¶¦ä»-0.39%æå‡åˆ°+5-8%

ç»¼åˆæ•ˆæœï¼š
Phase 1 â†‘ + Phase 2 â†‘ â†’ Phase 4é¢„æœŸ+5-8%ï¼ˆvs å½“å‰-0.34%ï¼‰
```

---

## ğŸ“ ä¿®æ”¹è®°å½•

### æ–‡ä»¶å˜æ›´

#### **deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py**

å…±4å¤„ä¿®æ”¹ï¼š
1. **ç¬¬6675-6703è¡Œ**ï¼šæµ‹è¯•å‚æ•°æ—¶çš„åˆ©æ¶¦è®¡ç®—
   - æ·»åŠ signal_typeåˆ¤æ–­
   - åˆ›å»ºå·®å¼‚åŒ–strategy_params

2. **ç¬¬6926-6939è¡Œ**ï¼šPhase 2 baselineè®¡ç®—
   - æ·»åŠ signal_typeåˆ¤æ–­
   - ä½¿ç”¨å·®å¼‚åŒ–å‚æ•°

3. **ç¬¬6992-7005è¡Œ**ï¼šéªŒè¯é›†è®¡ç®—
   - æ·»åŠ signal_typeåˆ¤æ–­
   - ä½¿ç”¨å·®å¼‚åŒ–å‚æ•°

4. **ç¬¬7019-7032è¡Œ**ï¼šè®­ç»ƒé›†è®¡ç®—
   - æ·»åŠ signal_typeåˆ¤æ–­
   - ä½¿ç”¨å·®å¼‚åŒ–å‚æ•°

#### **qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py**

åŒæ­¥ä¿®æ”¹ä¸Šè¿°4å¤„ï¼ˆè¡Œå·ç•¥æœ‰ä¸åŒï¼‰

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æœåŠ¡å™¨ç«¯æ›´æ–°

```bash
cd /root/10-23-bot
git pull origin main
rm -rf ds/__pycache__

# é‡æ–°å›æµ‹éªŒè¯ï¼ˆç»“åˆV8.5.2.4.34å’ŒV8.5.2.4.35ï¼‰
bash ~/å¿«é€Ÿé‡å¯_ä¿®å¤ç‰ˆ.sh backtest-deepseek
```

### éªŒè¯æŒ‡æ ‡

#### 1ï¸âƒ£ Phase 1æ•°æ®

```
âœ… æœŸæœ›çœ‹åˆ°ï¼ˆV8.5.2.4.34æ•ˆæœï¼‰ï¼š
- è¶…çŸ­çº¿ï¼šå¹³å‡åˆ©æ¶¦3-4%ï¼Œå¹³å‡æŒä»“1.5-2h
- æ³¢æ®µï¼šå¹³å‡åˆ©æ¶¦16-18%ï¼Œå¹³å‡æŒä»“4-6h
```

#### 2ï¸âƒ£ Phase 2æ•°æ®

```
âœ… æœŸæœ›çœ‹åˆ°ï¼ˆV8.5.2.4.35æ•ˆæœï¼‰ï¼š
- å¹³å‡åˆ©æ¶¦ï¼š+5% ~ +8%ï¼ˆvs å½“å‰-0.39%ï¼‰
- æ•è·ç‡ï¼š~85%
- ä¸å†æ˜¯è´Ÿåˆ©æ¶¦ï¼
```

#### 3ï¸âƒ£ Phase 4éªŒè¯

```
âœ… æœŸæœ›çœ‹åˆ°ï¼ˆååŒæ•ˆæœï¼‰ï¼š
- å¹³å‡åˆ©æ¶¦ï¼š+3% ~ +6%ï¼ˆvs å½“å‰-0.34%ï¼‰
- èƒœç‡ï¼š35% ~ 45%ï¼ˆvs å½“å‰18.7%ï¼‰
- åˆ¤å®šï¼šPASSEDï¼ˆvs å½“å‰FAILEDï¼‰
```

---

## ğŸ¯ ä¸ºä»€ä¹ˆPhase 2é‡è¦ï¼Ÿ

### Phase 2çš„ä½œç”¨

```
Phase 1: å®¢è§‚ç»Ÿè®¡ï¼ˆæ— å‚æ•°é™åˆ¶ï¼‰
  â†“ è¯†åˆ«æ‰€æœ‰å¯èƒ½çš„ç›ˆåˆ©æœºä¼š
Phase 2: å‚æ•°æ•è·ï¼ˆå¼•å…¥å¯è°ƒå‚æ•°ï¼‰
  â†“ æ‰¾åˆ°æœ€ä¼˜å‚æ•°ï¼Œæœ€å¤§åŒ–æ•è·Phase 1çš„æœºä¼š
Phase 3: é£é™©æ§åˆ¶ï¼ˆåœ¨Phase 2åŸºç¡€ä¸Šä¼˜åŒ–ï¼‰
  â†“ å¹³è¡¡åˆ©æ¶¦å’Œé£é™©
Phase 4: å…¨é‡éªŒè¯ï¼ˆæ£€æµ‹è¿‡æ‹Ÿåˆï¼‰
  â†“ ç¡®ä¿å‚æ•°åœ¨å…¨é‡æ•°æ®ä¸Šç¨³å®š
```

### Phase 2åˆ©æ¶¦ä¸ºè´Ÿçš„å½±å“

**å¦‚æœPhase 2åˆ©æ¶¦ä¸ºè´Ÿ**ï¼š
- Phase 3åœ¨è´Ÿåˆ©æ¶¦åŸºç¡€ä¸Šä¼˜åŒ– â†’ ç»“æœä»ç„¶ä¸ºè´Ÿ
- Phase 4éªŒè¯å¤±è´¥ â†’ è‡ªåŠ¨å›é€€åˆ°ä¿å®ˆå‚æ•°
- æ•´ä¸ªå‚æ•°ä¼˜åŒ–æµç¨‹å¤±æ•ˆ

**ä¿®å¤åçš„æµç¨‹**ï¼š
- Phase 2åˆ©æ¶¦ä¸ºæ­£ï¼ˆ+5-8%ï¼‰
- Phase 3åœ¨æ­£åˆ©æ¶¦åŸºç¡€ä¸Šä¼˜åŒ– â†’ æ›´é«˜åˆ©æ¶¦
- Phase 4éªŒè¯é€šè¿‡ â†’ é‡‡ç”¨ä¼˜åŒ–å‚æ•°
- **å‚æ•°ä¼˜åŒ–å‘æŒ¥ä½œç”¨ï¼**

---

## ğŸ”— ç›¸å…³ä¼˜åŒ–

### å·²å®Œæˆ

- **V8.5.2.4.31**ï¼šåŠ¨æ€è·Ÿè¸ªé€»è¾‘ï¼ˆå¼•å…¥å·®å¼‚åŒ–å‚æ•°ï¼‰
- **V8.5.2.4.34**ï¼šé€€å‡ºç­–ç•¥ä¼˜åŒ–ï¼ˆå»¶é•¿æŒä»“æ—¶é—´ï¼‰
- **V8.5.2.4.35**ï¼šPhase 2å·®å¼‚åŒ–å‚æ•°ï¼ˆæœ¬ä¼˜åŒ–ï¼‰

### åç»­å¯èƒ½çš„ä¼˜åŒ–

#### 1. Phase 3ä¹Ÿä½¿ç”¨å·®å¼‚åŒ–å‚æ•°

å½“å‰Phase 3å¯èƒ½ä»ç„¶ä½¿ç”¨ç»Ÿä¸€å‚æ•°ï¼Œå»ºè®®æ£€æŸ¥å¹¶ä¿®æ”¹ï¼š
- `optimize_strategy_with_risk_control_v8524`å‡½æ•°
- ç¡®ä¿è¶…çŸ­çº¿å’Œæ³¢æ®µåˆ†åˆ«ä¼˜åŒ–

#### 2. è¾“å‡ºæ›´è¯¦ç»†çš„Phase 2ç»Ÿè®¡

å»ºè®®Phase 2è¾“å‡ºåˆ†è§£ï¼š
```
Phase 2æ•è·è¡¨ç°:
âš¡ è¶…çŸ­çº¿: 300ä¸ª | å¹³å‡+2.5% | æ•è·ç‡83%
ğŸŒŠ æ³¢æ®µ: 1700ä¸ª | å¹³å‡+6.8% | æ•è·ç‡85%
ğŸ“Š ç»¼åˆ: 2000ä¸ª | å¹³å‡+5.8% | æ•è·ç‡84%
```

#### 3. Phase 2å‚æ•°æœç´¢ç©ºé—´åˆ†ç¦»

å½“å‰Phase 2æœç´¢ç»Ÿä¸€çš„å‚æ•°ç©ºé—´ï¼Œå»ºè®®ï¼š
- ä¸ºè¶…çŸ­çº¿å’Œæ³¢æ®µåˆ†åˆ«æœç´¢æœ€ä¼˜å‚æ•°
- ä¾‹å¦‚ï¼šè¶…çŸ­çº¿çš„min_signal_scoreå¯èƒ½éœ€è¦æ›´é«˜ï¼ˆè¿‡æ»¤ä½è´¨é‡å¿«é€Ÿä¿¡å·ï¼‰

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### calculate_single_actual_profitå‡½æ•°

**å‡½æ•°ç­¾å**ï¼š
```python
def calculate_single_actual_profit(
    opportunity: Dict,
    strategy_params: Dict,
    use_dynamic_atr: bool = True,
    include_trading_costs: bool = True
) -> float
```

**å…³é”®å‚æ•°**ï¼š
- `opportunity`: åŒ…å«entry_price, direction, atr, future_data, signal_typeç­‰
- `strategy_params`: **å…³é”®ï¼** åŒ…å«atr_tp_multiplier, atr_stop_multiplier, max_holding_hours

**å¤„ç†é€»è¾‘**ï¼š
1. æ ¹æ®`atr_tp_multiplier`è®¡ç®—æ­¢ç›ˆä»·
2. æ ¹æ®`atr_stop_multiplier`è®¡ç®—æ­¢æŸä»·
3. æ ¹æ®`max_holding_hours`åˆ¤æ–­æ˜¯å¦è¶…æ—¶
4. è¿”å›å®é™…åˆ©æ¶¦ï¼ˆæ‰£é™¤äº¤æ˜“æˆæœ¬0.14%ï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦å·®å¼‚åŒ–**ï¼š
- è¶…çŸ­çº¿ç”¨atr_tp=2.0ï¼šæ­¢ç›ˆå¿«ï¼Œç¬¦åˆå¿«è¿›å¿«å‡ºç­–ç•¥
- æ³¢æ®µç”¨atr_tp=6.0ï¼šæ­¢ç›ˆæ…¢ï¼Œç­‰å¾…æ›´å¤§åˆ©æ¶¦
- å¦‚æœæ··ç”¨ï¼šè¶…çŸ­çº¿ç”¨6.0ä¼šè¿‡äºè´ªå©ªï¼Œæ³¢æ®µç”¨2.0ä¼šè¿‡æ—©æ­¢ç›ˆ

---

**ä¼˜åŒ–çŠ¶æ€**: âœ… å®Œæˆå¹¶æ¨é€  
**å¾…éªŒè¯**: æœåŠ¡å™¨ç«¯å›æµ‹éªŒè¯ï¼ˆé¢„æœŸPhase 2åˆ©æ¶¦è½¬æ­£ï¼‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- V8.5.2.4.31ï¼šåŠ¨æ€è·Ÿè¸ªé€»è¾‘å®ç°
- V8.5.2.4.34ï¼šé€€å‡ºç­–ç•¥ä¼˜åŒ–
- V8.5.2.4.35ï¼šPhase 2å·®å¼‚åŒ–å‚æ•°ä¼˜åŒ–ï¼ˆæœ¬æ–‡æ¡£ï¼‰

