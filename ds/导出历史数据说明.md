# å†å²æ•°æ®å¯¼å‡ºå·¥å…·ä½¿ç”¨è¯´æ˜

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

è¿™ä¸ªè„šæœ¬ä¼šä»å¸å®‰APIè·å–çœŸå®çš„å†å²Kçº¿æ•°æ®ï¼Œè®¡ç®—æ‰€æœ‰æŠ€æœ¯æŒ‡æ ‡ï¼Œå¹¶åŒæ—¶å¯¼å‡ºåˆ°ä¸¤ä¸ªç›®å½•ï¼š
- `/home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/`
- `/home/admin/10-23-bot/ds/trading_data/qwen/market_snapshots/`

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨

```bash
# åœ¨æœ¬åœ°Macæ‰§è¡Œ
scp /Users/mac-bauyu/Downloads/10-23-bot/ds/export_historical_data.py admin@your_server:/home/admin/10-23-bot/ds/
```

### 2. åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ

#### æ–¹å¼Aï¼šè‡ªåŠ¨ç”Ÿæˆåˆ°ä»Šå¤©ï¼ˆæ¨èï¼‰

```bash
# SSHåˆ°æœåŠ¡å™¨
ssh admin@your_server

# è¿›å…¥ç›®å½•
cd /home/admin/10-23-bot/ds

# æ‰§è¡Œè„šæœ¬ï¼ˆè‡ªåŠ¨ç”Ÿæˆåˆ°ä»Šå¤©UTCæ—¶é—´ï¼‰
python3 export_historical_data.py 20251025
```

è¿™ä¼šç”Ÿæˆä» 20251025 åˆ°ä»Šå¤©çš„æ‰€æœ‰æ•°æ®ã€‚

#### æ–¹å¼Bï¼šæŒ‡å®šæ—¥æœŸèŒƒå›´

```bash
# ç”ŸæˆæŒ‡å®šæ—¥æœŸèŒƒå›´
python3 export_historical_data.py 20251025 20251102
```

#### æ–¹å¼Cï¼šåªç”Ÿæˆä»Šå¤©çš„æ•°æ®

```bash
# è·å–ä»Šå¤©çš„æ—¥æœŸï¼ˆUTCï¼‰
TODAY=$(date -u +%Y%m%d)

# ç”Ÿæˆä»Šå¤©çš„æ•°æ®
python3 export_historical_data.py $TODAY
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

### æ–‡ä»¶å‘½å
```
20251025.csv
20251026.csv
20251102.csv
...
```

### æ–‡ä»¶ä½ç½®
```
/home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/YYYYMMDD.csv
/home/admin/10-23-bot/ds/trading_data/qwen/market_snapshots/YYYYMMDD.csv
```

### æ•°æ®æ ¼å¼
å®Œå…¨ç¬¦åˆç³»ç»Ÿè¦æ±‚çš„51åˆ—æ ¼å¼ï¼š
- timeï¼ˆ0000-2345ï¼Œ15åˆ†é’Ÿé—´éš”ï¼‰
- coinï¼ˆBTC/ETH/SOL/BNB/XRP/DOGE/LTCï¼‰
- OHLCVæ•°æ®
- æŠ€æœ¯æŒ‡æ ‡ï¼ˆRSIã€MACDã€ATRç­‰ï¼‰
- æ”¯æ’‘é˜»åŠ›ä½
- è¶‹åŠ¿åˆ¤æ–­
- YTCä¿¡å·ç­‰

## âš ï¸ è¦†ç›–ç­–ç•¥

- å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œä¼šå…ˆå¤‡ä»½ä¸º `YYYYMMDD_backup.csv`
- ç„¶åå†™å…¥æ–°æ•°æ®è¦†ç›–åŸæ–‡ä»¶
- ç¡®ä¿ä¸ä¼šä¸¢å¤±æ—§æ•°æ®

## ğŸ“ˆ é¢„æœŸè¾“å‡ºç¤ºä¾‹

```
============================================================
åŠ å¯†è´§å¸å†å²æ•°æ®å¯¼å‡ºå·¥å…· (Market Snapshots)
============================================================
å½“å‰UTCæ—¶é—´: 2025-11-03 18:00:00 UTC
æ—¥æœŸèŒƒå›´: 20251025 ~ 20251103
å¸ç§æ•°é‡: 7
è¾“å‡ºç›®å½•:
  - /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots
  - /home/admin/10-23-bot/ds/trading_data/qwen/market_snapshots
============================================================

============================================================
å¯¼å‡º 20251025 çš„æ•°æ®
============================================================
  æ­£åœ¨è·å– BTC/USDT:USDT çš„ 20251025 æ•°æ®...
    è·å–åˆ° 96 æ¡è®°å½•
  æ­£åœ¨è·å– ETH/USDT:USDT çš„ 20251025 æ•°æ®...
    è·å–åˆ° 96 æ¡è®°å½•
  ...
  âœ“ å·²å†™å…¥: .../deepseek/market_snapshots/20251025.csv (672 æ¡è®°å½•)
  âœ“ å·²å†™å…¥: .../qwen/market_snapshots/20251025.csv (672 æ¡è®°å½•)
âœ“ 20251025 å¯¼å‡ºå®Œæˆ

...ï¼ˆç»§ç»­å¤„ç†å…¶ä»–æ—¥æœŸï¼‰

============================================================
âœ“ å¯¼å‡ºå®Œæˆï¼
  æˆåŠŸ: 10 å¤©
  æ–‡ä»¶ä½ç½®:
    /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots
    /home/admin/10-23-bot/ds/trading_data/qwen/market_snapshots
============================================================
```

## ğŸ”§ éªŒè¯æ•°æ®

### æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ

```bash
# æŸ¥çœ‹deepseekç›®å½•
ls -lh /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/

# æŸ¥çœ‹qwenç›®å½•
ls -lh /home/admin/10-23-bot/ds/trading_data/qwen/market_snapshots/

# ç»Ÿè®¡æŸä¸ªæ–‡ä»¶çš„è¡Œæ•°
wc -l /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/20251103.csv
```

### æŸ¥çœ‹æ–‡ä»¶å†…å®¹

```bash
# æŸ¥çœ‹è¡¨å¤´
head -1 /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/20251103.csv

# æŸ¥çœ‹å‰5è¡Œæ•°æ®
head -6 /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/20251103.csv

# æŸ¥çœ‹æŸä¸ªå¸ç§çš„æ•°æ®
grep "^0000,BTC" /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/20251103.csv
```

## ğŸ”„ å®šæœŸæ›´æ–°

### æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨æ›´æ–°

```bash
# æ¯å¤©æ‰§è¡Œä¸€æ¬¡ï¼Œæ›´æ–°åˆ°æœ€æ–°
cd /home/admin/10-23-bot/ds
TODAY=$(date -u +%Y%m%d)
python3 export_historical_data.py $TODAY
```

### æ–¹æ¡ˆ2ï¼šæ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ï¼šæ¯å¤©UTCæ—¶é—´00:05è‡ªåŠ¨æ›´æ–°æ˜¨å¤©å’Œä»Šå¤©çš„æ•°æ®
5 0 * * * cd /home/admin/10-23-bot/ds && python3 export_historical_data.py $(date -u -d "yesterday" +\%Y\%m\%d) >> logs/data_export.log 2>&1
```

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæŸäº›æ—¥æœŸæ²¡æœ‰æ•°æ®ï¼Ÿ
A: å¸å®‰APIåªä¿ç•™æœ€è¿‘çš„å†å²æ•°æ®ï¼ˆé€šå¸¸çº¦1-2ä¸ªæœˆï¼‰ã€‚æ›´æ—©çš„æ•°æ®å¯èƒ½æ— æ³•è·å–ã€‚

### Q2: æ•°æ®é‡æœ‰å¤šå¤§ï¼Ÿ
A: æ¯ä¸ªæ–‡ä»¶çº¦400-500KBï¼Œæ¯å¤©2ä¸ªæ–‡ä»¶ï¼ˆdeepseek + qwenï¼‰ï¼Œçº¦1MB/å¤©ã€‚

### Q3: ä¼šå½±å“æ­£åœ¨è¿è¡Œçš„äº¤æ˜“æœºå™¨äººå—ï¼Ÿ
A: ä¸ä¼šã€‚è¿™ä¸ªè„šæœ¬åªè¯»å–APIæ•°æ®å¹¶å†™å…¥æ–‡ä»¶ï¼Œä¸ä¼šå¹²æ‰°æœºå™¨äººè¿è¡Œã€‚

### Q4: å¦‚ä½•æ¢å¤å¤‡ä»½çš„æ•°æ®ï¼Ÿ
A: 
```bash
# å¦‚æœæ–°æ•°æ®æœ‰é—®é¢˜ï¼Œå¯ä»¥æ¢å¤å¤‡ä»½
cd /home/admin/10-23-bot/ds/trading_data/deepseek/market_snapshots/
mv 20251103_backup.csv 20251103.csv
```

### Q5: æ—¶åŒºé—®é¢˜
A: æ‰€æœ‰æ—¶é—´éƒ½ä½¿ç”¨UTCæ—¶åŒºï¼Œtimeåˆ—æ ¼å¼ä¸ºHHMMï¼ˆå¦‚0000ã€0015ã€0030...2345ï¼‰ã€‚

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é¦–æ¬¡ä½¿ç”¨ï¼šç”Ÿæˆå†å²æ•°æ®

```bash
# ç”Ÿæˆæœ€è¿‘7å¤©çš„æ•°æ®
python3 export_historical_data.py 20251026
```

### 2. æ—¥å¸¸ç»´æŠ¤ï¼šæ¯å¤©æ›´æ–°

```bash
# åªæ›´æ–°ä»Šå¤©çš„æ•°æ®
TODAY=$(date -u +%Y%m%d)
python3 export_historical_data.py $TODAY
```

### 3. ä¿®å¤ç¼ºå¤±æ•°æ®

```bash
# å¦‚æœå‘ç°æŸå¤©æ•°æ®ç¼ºå¤±ï¼Œå•ç‹¬ç”Ÿæˆ
python3 export_historical_data.py 20251028 20251028
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ**ï¼ˆæœ‰å®Œæ•´çš„Pythonç¯å¢ƒï¼‰
2. **ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸**ï¼ˆéœ€è¦è®¿é—®å¸å®‰APIï¼‰
3. **é¦–æ¬¡è¿è¡Œå¯èƒ½è¾ƒæ…¢**ï¼ˆéœ€è¦ä¸‹è½½å¤§é‡å†å²æ•°æ®ï¼‰
4. **å»ºè®®éäº¤æ˜“é«˜å³°æœŸæ‰§è¡Œ**ï¼ˆé¿å…APIé™æµï¼‰
5. **å®šæœŸæ£€æŸ¥æ—¥å¿—**ï¼ˆç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼‰

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜1: æƒé™é”™è¯¯

```bash
# ç¡®ä¿æœ‰å†™å…¥æƒé™
chmod +x export_historical_data.py
chmod -R 755 /home/admin/10-23-bot/ds/trading_data/
```

### é—®é¢˜2: APIé™æµ

```bash
# å¦‚æœé‡åˆ°é™æµï¼Œç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•
# æˆ–è€…åˆ†æ‰¹æ‰§è¡Œï¼Œæ¯æ¬¡åªç”Ÿæˆå‡ å¤©çš„æ•°æ®
```

### é—®é¢˜3: æ•°æ®æ ¼å¼é”™è¯¯

```bash
# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼
python3 -c "import csv; list(csv.DictReader(open('trading_data/deepseek/market_snapshots/20251103.csv')))" 
```

---

**å¿«é€Ÿå¼€å§‹å‘½ä»¤ï¼š**

```bash
# ä¸€é”®æ‰§è¡Œï¼šä¸Šä¼ è„šæœ¬ -> ç”Ÿæˆæ•°æ® -> éªŒè¯
scp ds/export_historical_data.py admin@server:/home/admin/10-23-bot/ds/ && \
ssh admin@server "cd /home/admin/10-23-bot/ds && python3 export_historical_data.py 20251025 && ls -lh trading_data/*/market_snapshots/"
```

