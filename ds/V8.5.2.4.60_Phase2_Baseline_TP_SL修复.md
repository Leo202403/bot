# V8.5.2.4.60 - Phase 2 Baseline TP/SL å‚æ•°ä¼ é€’ä¿®å¤

**ç‰ˆæœ¬**: V8.5.2.4.60  
**æ—¥æœŸ**: 2025-11-19  
**ç±»å‹**: BugFix - Phase 2 Baselineå‚æ•°ä¼ é€’  
**ä¼˜å…ˆçº§**: ğŸ”´ Critical

---

## ğŸ“‹ é—®é¢˜æè¿°

### ç—‡çŠ¶
- **Phase 2 TP/SLæµ‹è¯•**: æ‰¾åˆ°æœ€ä¼˜TP=30.0/35.0, SL=1.5/2.5ï¼Œåˆ©æ¶¦12-13%
- **Phase 2 Baseline**: åªæœ‰1.26%ï¼Œè¿œä½äºé¢„æœŸ
- **åŸå› **: Baselineè®¡ç®—æ—¶**æ²¡æœ‰ä½¿ç”¨TP/SLæµ‹è¯•çš„æœ€ä¼˜å€¼**

### æ ¹æœ¬åŸå› 

**Line 7632-7638** (deepseek) / **Line 7637-7643** (qwen):

```python
# âŒ æ—§ä»£ç ï¼šä½¿ç”¨å‚æ•°èŒƒå›´ä¸­ä½æ•°ï¼ˆå›ºå®šå€¼ï¼‰
if signal_type == 'scalping':
    default_tp = scalping_params_range['atr_tp'][1]  # 2.0ï¼ˆå›ºå®šï¼‰
    default_sl = scalping_params_range['atr_sl'][2]  # 1.5ï¼ˆå›ºå®šï¼‰
else:
    default_tp = swing_params_range['atr_tp'][2]  # 6.0ï¼ˆå›ºå®šï¼‰
    default_sl = swing_params_range['atr_sl'][1]  # 2.5ï¼ˆå›ºå®šï¼‰
```

**é—®é¢˜**:
1. TP/SLæµ‹è¯•ï¼ˆLine 6938-7176ï¼‰æ‰¾åˆ°æœ€ä¼˜å€¼ï¼šTP=30/35, SL=1.5/2.5
2. æµ‹è¯•ç»“æœä¿å­˜åˆ° `test_points_meta['optimal_tp_sl']`
3. **ä½† Phase 2 Baseline è®¡ç®—ï¼ˆLine 7627ï¼‰æ²¡æœ‰ä½¿ç”¨è¿™äº›æœ€ä¼˜å€¼**
4. å¯¼è‡´ Baseline ä½¿ç”¨ TP=2/6ï¼ˆå¤ªå°ï¼‰ï¼Œåˆ©æ¶¦åªæœ‰1.26%

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹ä½ç½®
- **deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py**: Line 7627-7649
- **qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py**: Line 7632-7654

### ä¿®å¤åä»£ç 

```python
# âœ… æ–°ä»£ç ï¼šä¼˜å…ˆä½¿ç”¨TP/SLæµ‹è¯•çš„æœ€ä¼˜å€¼
if signal_type == 'scalping':
    # ä¼˜å…ˆä½¿ç”¨TP/SLæµ‹è¯•çš„æœ€ä¼˜å€¼
    if best_scalping_tp_sl:
        default_tp = best_scalping_tp_sl['tp']  # ä¾‹å¦‚ï¼š30.0
        default_sl = best_scalping_tp_sl['sl']  # ä¾‹å¦‚ï¼š1.5
    else:
        default_tp = scalping_params_range['atr_tp'][1]  # é™çº§ï¼š2.0
        default_sl = scalping_params_range['atr_sl'][2]  # é™çº§ï¼š1.5
    default_holding = scalping_params_range['max_holding'][1]  # 12
else:
    # ä¼˜å…ˆä½¿ç”¨TP/SLæµ‹è¯•çš„æœ€ä¼˜å€¼
    if best_swing_tp_sl:
        default_tp = best_swing_tp_sl['tp']  # ä¾‹å¦‚ï¼š35.0
        default_sl = best_swing_tp_sl['sl']  # ä¾‹å¦‚ï¼š2.5
    else:
        default_tp = swing_params_range['atr_tp'][2]  # é™çº§ï¼š6.0
        default_sl = swing_params_range['atr_sl'][1]  # é™çº§ï¼š2.5
    default_holding = swing_params_range['max_holding'][2]  # 72
```

---

## ğŸ“Š é¢„æœŸæ”¹å–„

### ä¿®å¤å‰ï¼ˆV8.5.2.4.59ï¼‰
```
âœ… ã€æœ€ä¼˜TP/SLå°†åº”ç”¨åˆ°åç»­æµç¨‹ã€‘
   âš¡ è¶…çŸ­çº¿: TP=30.0, SL=1.5 â†’ åˆ©æ¶¦12.50%
   ğŸŒŠ æ³¢æ®µ: TP=35.0, SL=2.5 â†’ åˆ©æ¶¦13.34%

ğŸ“Š Phase 2 baselineï¼ˆä¾›Phase 3ä½¿ç”¨ï¼‰:
   æ•è·: 2527ä¸ª (63.2%)
   å¹³å‡åˆ©æ¶¦: 1.26%  âŒ åªæœ‰1.26%ï¼
```

### ä¿®å¤åï¼ˆV8.5.2.4.60ï¼‰
```
âœ… ã€æœ€ä¼˜TP/SLå°†åº”ç”¨åˆ°åç»­æµç¨‹ã€‘
   âš¡ è¶…çŸ­çº¿: TP=30.0, SL=1.5 â†’ åˆ©æ¶¦12.50%
   ğŸŒŠ æ³¢æ®µ: TP=35.0, SL=2.5 â†’ åˆ©æ¶¦13.34%

ğŸ“Š Phase 2 baselineï¼ˆä¾›Phase 3ä½¿ç”¨ï¼‰:
   æ•è·: 2527ä¸ª (63.2%)
   å¹³å‡åˆ©æ¶¦: 12.5%  âœ… ä½¿ç”¨æœ€ä¼˜TP/SLï¼
```

**é¢„æœŸæå‡**:
- Phase 2 Baseline: 1.26% â†’ ~12% (+850%)
- Phase 3åŸºå‡†æå‡: æ›´å‡†ç¡®çš„èµ·ç‚¹
- æœ€ç»ˆå‚æ•°ä¼˜åŒ–: åŸºäºæ­£ç¡®çš„baseline

---

## ğŸ§ª éªŒè¯æ–¹æ³•

### 1. å›æµ‹éªŒè¯
```bash
cd /Users/mac-bauyu/Downloads/10-23-bot/ds
MANUAL_BACKTEST=true python3 deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py backtest-deepseek
```

**éªŒè¯ç‚¹**:
1. âœ… TP/SLæµ‹è¯•é˜¶æ®µæ˜¾ç¤ºæœ€ä¼˜å€¼ï¼ˆTP=30/35, SL=1.5/2.5ï¼‰
2. âœ… Phase 2 Baselineåˆ©æ¶¦ â‰ˆ 12-13%ï¼ˆæ¥è¿‘TP/SLæµ‹è¯•ç»“æœï¼‰
3. âœ… æ—¥å¿—ä¸­æ˜¾ç¤º"ä¼˜å…ˆä½¿ç”¨TP/SLæµ‹è¯•çš„æœ€ä¼˜å€¼"

### 2. å…³é”®æ—¥å¿—

æŸ¥çœ‹æ—¥å¿—æ˜¯å¦åŒ…å«ï¼š
```
ã€V8.5.2.4.60ã€‘ä¼˜å…ˆä½¿ç”¨TP/SLæµ‹è¯•æ‰¾åˆ°çš„æœ€ä¼˜å€¼
```

---

## ğŸ“ å…³è”ç‰ˆæœ¬

- **å‰ç½®**: V8.5.2.4.59 - ATRè®¡ç®—ä¿®å¤
- **åç»­**: V8.5.2.4.61 - å¾…å®šï¼ˆå¯èƒ½æ˜¯Phase 3ä¼˜åŒ–ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é™çº§æœºåˆ¶**: å¦‚æœ `best_scalping_tp_sl` æˆ– `best_swing_tp_sl` ä¸å­˜åœ¨ï¼ˆæµ‹è¯•å¤±è´¥ï¼‰ï¼Œä¼šé™çº§ä½¿ç”¨å‚æ•°èŒƒå›´ä¸­ä½æ•°
2. **é€‚ç”¨èŒƒå›´**: ä¿®å¤ä»…å½±å“ **Phase 2 Baseline è®¡ç®—**ï¼ŒTP/SLæµ‹è¯•æœ¬èº«æ²¡æœ‰å˜åŒ–
3. **å‘åå…¼å®¹**: é™çº§æœºåˆ¶ç¡®ä¿è€æ•°æ®ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ

---

## âœ… æäº¤ä¿¡æ¯

```bash
git add ds/deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py ds/qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py ds/V8.5.2.4.60_Phase2_Baseline_TP_SLä¿®å¤.md
git commit -m "fix: V8.5.2.4.60 Phase2 Baselineä½¿ç”¨TP/SLæµ‹è¯•æœ€ä¼˜å€¼

- ã€ä¿®å¤ã€‘Phase 2 Baselineè®¡ç®—æ—¶ä¼˜å…ˆä½¿ç”¨best_scalping_tp_sl/best_swing_tp_sl
- ã€æ”¹è¿›ã€‘æ·»åŠ é™çº§æœºåˆ¶ï¼ˆæµ‹è¯•å¤±è´¥æ—¶ä½¿ç”¨å‚æ•°èŒƒå›´ä¸­ä½æ•°ï¼‰
- ã€é¢„æœŸã€‘Baselineåˆ©æ¶¦ä»1.26%æå‡è‡³12%+ï¼Œæå‡850%
- ã€æ–‡ä»¶ã€‘deepseek/qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py (Line 7627-7649/7632-7654)"
git push origin main
```

