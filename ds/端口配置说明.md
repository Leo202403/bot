# ğŸ”Œ ç«¯å£é…ç½®è¯´æ˜

## ğŸ“Š æœåŠ¡ç«¯å£ä¸€è§ˆ

| æœåŠ¡åç§° | ç«¯å£ | è®¿é—®åœ°å€ | è¯´æ˜ |
|---------|------|---------|------|
| **å‰ç«¯Webç•Œé¢** | **80** | **http://43.100.52.142** | AIäº¤æ˜“ç³»ç»Ÿä¸»ç•Œé¢ï¼ˆgunicornï¼‰ |
| Webç›‘æ§é¢æ¿ | 8080 | http://43.100.52.142:8080 | ç³»ç»Ÿç›‘æ§ï¼ˆå¦‚æœæœ‰é…ç½®ï¼‰ |
| DeepSeek AI | - | åå°æœåŠ¡ | AIäº¤æ˜“å†³ç­–å¼•æ“ |
| Qwen AI | - | åå°æœåŠ¡ | AIäº¤æ˜“å†³ç­–å¼•æ“ |

---

## âš ï¸ é‡è¦æç¤º

### 1. **å‰ç«¯ç«¯å£æ˜¯80ï¼Œä¸æ˜¯5000ï¼**

```bash
# âœ… æ­£ç¡®è®¿é—®æ–¹å¼
http://43.100.52.142

# âŒ é”™è¯¯è®¿é—®æ–¹å¼
http://43.100.52.142:5000  # æ­¤ç«¯å£æ— æœåŠ¡ï¼
```

### 2. **ä¸ºä»€ä¹ˆæ˜¯80ç«¯å£ï¼Ÿ**

æŸ¥çœ‹gunicorné…ç½®ï¼š
```bash
cat /root/pythoncç¨‹åº/my_project/gunicorn.conf.py
```

è¾“å‡ºï¼š
```python
bind = '0.0.0.0:80'  # â† ç›‘å¬80ç«¯å£
workers = 4
...
```

### 3. **å¦‚ä½•éªŒè¯ç«¯å£ï¼Ÿ**

```bash
# æŸ¥çœ‹å®é™…ç›‘å¬çš„ç«¯å£
netstat -tlnp | grep python

# è¾“å‡ºç¤ºä¾‹ï¼š
tcp        0      0 0.0.0.0:80    0.0.0.0:*    LISTEN    18576/python3
```

---

## ğŸ”§ å¦‚æœéœ€è¦ä¿®æ”¹ç«¯å£

### æ–¹æ¡ˆ1ï¼šä¿®æ”¹gunicorné…ç½®ï¼ˆæ¨èï¼‰

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano /root/pythoncç¨‹åº/my_project/gunicorn.conf.py

# ä¿®æ”¹bindå‚æ•°
bind = '0.0.0.0:5000'  # æ”¹ä¸º5000ç«¯å£

# é‡å¯å‰ç«¯
supervisorctl restart web
```

### æ–¹æ¡ˆ2ï¼šä¿®æ”¹supervisoré…ç½®

```bash
# ç¼–è¾‘supervisoré…ç½®
nano /etc/supervisor/conf.d/web.conf

# ä¿®æ”¹commandè¡Œ
command=/bin/bash -c "cd /root/pythoncç¨‹åº/my_project && /root/pythoncç¨‹åº/my_project/venv/bin/gunicorn -b 0.0.0.0:5000 -c gunicorn.conf.py -w 1 'æ¯æ—¥å£çº¸æ›´æ¢:app'"

# é‡æ–°åŠ è½½é…ç½®
supervisorctl reread
supervisorctl update
supervisorctl restart web
```

---

## ğŸ›¡ï¸ é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®

### å½“å‰å¼€æ”¾ç«¯å£

ç¡®ä¿ä»¥ä¸‹ç«¯å£åœ¨å®‰å…¨ç»„ä¸­å¼€æ”¾ï¼š

| ç«¯å£ | åè®® | è¯´æ˜ |
|-----|------|------|
| **80** | TCP | **å‰ç«¯Webç•Œé¢ï¼ˆå¿…é¡»ï¼‰** |
| 8080 | TCP | Webç›‘æ§é¢æ¿ï¼ˆå¯é€‰ï¼‰ |
| 22 | TCP | SSHè¿œç¨‹è¿æ¥ï¼ˆå¿…é¡»ï¼‰ |
| 443 | TCP | HTTPSï¼ˆå¦‚æœå¯ç”¨SSLï¼‰ |

### å¦‚ä½•æ£€æŸ¥å®‰å…¨ç»„

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ ECS å®ä¾‹ â†’ å®‰å…¨ç»„
3. æŸ¥çœ‹å…¥æ–¹å‘è§„åˆ™
4. ç¡®è®¤ **80/TCP** å·²å¼€æ”¾

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šè®¿é—® http://43.100.52.142 æ— å“åº”

**æ£€æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
supervisorctl status web

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep :80

# 3. æ£€æŸ¥é˜²ç«å¢™
ufw status  # å¦‚æœå¯ç”¨äº†ufw
iptables -L -n | grep 80  # æ£€æŸ¥iptablesè§„åˆ™

# 4. æµ‹è¯•æœ¬åœ°è®¿é—®
curl -I http://localhost:80

# 5. æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/gunicorn/error.log
```

### é—®é¢˜2ï¼šæ˜¾ç¤º"æ— æ•°æ®"

**å¯èƒ½åŸå› **ï¼š
1. AIæœºå™¨äººæœªè¿è¡Œ
2. æ•°æ®åº“/CSVæ–‡ä»¶ä¸å­˜åœ¨
3. å‰ç«¯APIè·¯å¾„é”™è¯¯

**æ£€æŸ¥æ­¥éª¤**ï¼š

```bash
# æ£€æŸ¥AIæœºå™¨äººçŠ¶æ€
supervisorctl status deepseek qwen

# æ£€æŸ¥æ•°æ®æ–‡ä»¶
ls -lh /root/10-23-bot/ds/trading_data/deepseek/
ls -lh /root/10-23-bot/ds/trading_data/qwen/

# æŸ¥çœ‹å‰ç«¯è®¿é—®æ—¥å¿—
tail -f /var/log/gunicorn/access.log
```

### é—®é¢˜3ï¼š5000ç«¯å£è®¿é—®ä¸äº†

**è§£ç­”**ï¼š**è¿™æ˜¯æ­£å¸¸çš„ï¼** å› ä¸ºå‰ç«¯è¿è¡Œåœ¨80ç«¯å£ï¼Œ5000ç«¯å£æ²¡æœ‰æœåŠ¡ã€‚

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| Gunicorné…ç½® | `/root/pythoncç¨‹åº/my_project/gunicorn.conf.py` | ç«¯å£å’Œworkeré…ç½® |
| Supervisoré…ç½® | `/etc/supervisor/conf.d/web.conf` | è¿›ç¨‹ç®¡ç†é…ç½® |
| å‰ç«¯ä¸»æ–‡ä»¶ | `/root/pythoncç¨‹åº/my_project/æ¯æ—¥å£çº¸æ›´æ¢.py` | Flaskåº”ç”¨ |
| è®¿é—®æ—¥å¿— | `/var/log/gunicorn/access.log` | HTTPè®¿é—®è®°å½• |
| é”™è¯¯æ—¥å¿— | `/var/log/gunicorn/error.log` | é”™è¯¯å’Œå¯åŠ¨æ—¥å¿— |

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### é‡å¯å‰ç«¯

```bash
bash ~/å¿«é€Ÿé‡å¯_ä¿®å¤ç‰ˆ.sh frontend
```

### æŸ¥çœ‹å‰ç«¯çŠ¶æ€

```bash
supervisorctl status web
```

### æŸ¥çœ‹ç›‘å¬ç«¯å£

```bash
netstat -tlnp | grep -E '(80|8080)'
```

### æµ‹è¯•å‰ç«¯è®¿é—®

```bash
curl -I http://localhost:80
```

---

## ğŸ“ å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šConnection refused

```bash
# åŸå› ï¼šæœåŠ¡æœªå¯åŠ¨
# è§£å†³ï¼šé‡å¯æœåŠ¡
supervisorctl restart web
```

### é”™è¯¯2ï¼šç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥å ç”¨è¿›ç¨‹
lsof -i :80

# å¼ºåˆ¶åœæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>

# é‡å¯æœåŠ¡
supervisorctl restart web
```

### é”™è¯¯3ï¼šæƒé™ä¸è¶³

```bash
# åŸå› ï¼š80ç«¯å£éœ€è¦rootæƒé™
# è§£å†³ï¼šç¡®ä¿supervisorä»¥rootè¿è¡Œ
ps aux | grep supervisor
```

---

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·éªŒè¯ï¼š

- [ ] å‰ç«¯å¯é€šè¿‡ http://43.100.52.142 è®¿é—®
- [ ] é¡µé¢æ˜¾ç¤ºAIäº¤æ˜“æ•°æ®ï¼ˆéç©ºç™½ï¼‰
- [ ] supervisorctl status web æ˜¾ç¤ºRUNNING
- [ ] netstatæ˜¾ç¤º80ç«¯å£åœ¨ç›‘å¬
- [ ] é˜¿é‡Œäº‘å®‰å…¨ç»„å¼€æ”¾äº†80ç«¯å£
- [ ] /var/log/gunicorn/error.log æ— é”™è¯¯

---

## ğŸ‰ æ€»ç»“

**è®°ä½**ï¼š
- âœ… å‰ç«¯ç«¯å£ï¼š**80**
- âœ… è®¿é—®åœ°å€ï¼š**http://43.100.52.142**
- âŒ ~~http://43.100.52.142:5000~~ ï¼ˆæ­¤åœ°å€æ— æ•ˆï¼‰

å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥çœ‹ `/var/log/gunicorn/error.log` æ—¥å¿—ã€‚

