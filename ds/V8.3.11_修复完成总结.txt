======================================================================
âœ… V8.3.11 ä¿®å¤å®Œæˆ - å®é™…äº¤æ˜“æ­£ç¡®ä½¿ç”¨ Separated Params
======================================================================
â° å®Œæˆæ—¶é—´: 2025-11-07 18:15
ğŸ“Š ä¿®å¤çŠ¶æ€: âœ… å®Œæˆ | è¯­æ³•éªŒè¯é€šè¿‡
ğŸ¯ è§£å†³é—®é¢˜: V8.3.4ä¼˜åŒ–å‚æ•°æœªè¢«å®é™…äº¤æ˜“ä½¿ç”¨

======================================================================
ã€ä¿®å¤å†…å®¹æ€»ç»“ã€‘
======================================================================

ğŸ“ ä¿®æ”¹æ–‡ä»¶: qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py + deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py

ğŸ”§ ä¿®å¤1: get_learning_config_for_symbol å‡½æ•°ï¼ˆç¬¬3576è¡Œï¼‰
---
âœ… æ·»åŠ  signal_type='swing' å‚æ•°
âœ… ä¼˜å…ˆä» scalping_params/swing_params è¯»å–å‚æ•°
âœ… Fallback åˆ° global å‚æ•°

å…³é”®ä»£ç :
```python
# ã€V8.3.11ã€‘ä¼˜å…ˆä»scalping_params/swing_paramsè¯»å–
if signal_type == 'scalping':
    strategy_params = config.get('scalping_params', {})
    default_rr = 1.3
    default_score = 50
else:  # swing
    strategy_params = config.get('swing_params', {})
    default_rr = 2.0
    default_score = 60

# ä¼˜å…ˆçº§ï¼šstrategy_params > global > default
ai_base_rr = strategy_params.get('min_risk_reward') or config["global"].get("min_risk_reward", default_rr)
ai_base_score = strategy_params.get('min_signal_score') or config["global"].get("min_signal_score", default_score)
```

ğŸ”§ ä¿®å¤2: calculate_unified_risk_reward_v2 å‡½æ•°ï¼ˆç¬¬10537è¡Œï¼‰
---
âœ… æ ¹æ® signal_type è¯»å–å¯¹åº”çš„ separated params

å…³é”®ä»£ç :
```python
if min_rr is None:
    # ã€V8.3.11ã€‘ä¼˜å…ˆä½¿ç”¨separated paramsï¼Œfallbackåˆ°global
    if signal_type == 'scalping':
        min_rr = config.get('scalping_params', {}).get('min_risk_reward') or config.get("global", {}).get("min_risk_reward", 1.3)
    else:  # swing
        min_rr = config.get('swing_params', {}).get('min_risk_reward') or config.get("global", {}).get("min_risk_reward", 2.0)
```

======================================================================
ã€ä¿®å¤å‰åå¯¹æ¯”ã€‘
======================================================================

âŒ ä¿®å¤å‰ï¼ˆç”¨æˆ·åé¦ˆé—®é¢˜ï¼‰:
  ğŸ“Š V7.7.0ä¼˜åŒ–: global min_risk_reward = 1.5
  ğŸ“§ é‚®ä»¶æ˜¾ç¤º: swing min_risk_reward = 2.0
  ğŸ“± å®é™…è¦æ±‚: 2.0 Ã— 1.3 (high_risk) = 2.6 â† ä»globalè¯»å–ï¼
  
âœ… ä¿®å¤åï¼ˆé¢„æœŸè¡Œä¸ºï¼‰:
  ğŸ“Š V7.7.0ä¼˜åŒ–: global min_risk_reward = 1.5
  ğŸ“§ V8.3.4ä¼˜åŒ–: swing_params min_risk_reward = 1.8 (å‡è®¾)
  ğŸ“± å®é™…è¦æ±‚: 1.8 Ã— 1.3 (high_risk) = 2.34 â† ä»swing_paramsè¯»å–ï¼

======================================================================
ã€å‚æ•°è¯»å–ä¼˜å…ˆçº§ï¼ˆV8.3.11ï¼‰ã€‘
======================================================================

å®é™…å¼€ä»“æ—¶çš„å‚æ•°è¯»å–é¡ºåºï¼š

1ï¸âƒ£ å®‰å…¨æ¨¡å¼å‚æ•°ï¼ˆæ–°æ‰‹ä¿æŠ¤ï¼‰
   - å¦‚æœæ˜¯æ–°æ‰‹/å­¦ä¹ æœŸ â†’ ä½¿ç”¨ safe_params

2ï¸âƒ£ å¸ç§ç‰¹å®šå‚æ•°
   - å¦‚æœè¯¥å¸ç§æœ‰â‰¥5ç¬”äº¤æ˜“ â†’ ä½¿ç”¨ per_symbol params

3ï¸âƒ£ **Separated Strategy Params** â­ æ–°å¢
   - Scalpingä¿¡å· â†’ è¯»å– scalping_params.min_risk_reward
   - Swingä¿¡å· â†’ è¯»å– swing_params.min_risk_reward
   
4ï¸âƒ£ Globalå‚æ•°ï¼ˆFallbackï¼‰
   - å¦‚æœseparated paramsä¸å­˜åœ¨ â†’ ä½¿ç”¨ global.min_risk_reward

5ï¸âƒ£ ç¡¬ç¼–ç é»˜è®¤å€¼ï¼ˆæœ€ç»ˆFallbackï¼‰
   - Scalping: 1.3, Swing: 2.0

======================================================================
ã€ç«‹å³éƒ¨ç½²ã€‘
======================================================================

# 1. ä¸Šä¼ åˆ°æœåŠ¡å™¨
cd /Users/mac-bauyu/Downloads/10-23-bot/ds
scp qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py admin@æœåŠ¡å™¨IP:~/10-23-bot/ds/

# 2. SSHåˆ°æœåŠ¡å™¨
ssh admin@æœåŠ¡å™¨IP

# 3. éªŒè¯è¯­æ³•
cd ~/10-23-bot/ds
python3 -m py_compile qwen_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py deepseek_å¤šå¸ç§æ™ºèƒ½ç‰ˆ.py

# 4. é‡æ–°è¿è¡Œå›æµ‹
cd ~
bash å¿«é€Ÿé‡å¯_ä¿®å¤ç‰ˆ.sh backtest-deepseek

======================================================================
ã€éªŒè¯ä¿®å¤æ•ˆæœã€‘
======================================================================

âœ… æˆåŠŸæ ‡å¿—ï¼š

1. V8.3.4æˆåŠŸæ‰§è¡Œï¼ˆä¸å†æŠ¥Seriesé”™è¯¯ï¼‰
   ```
   âœ… V8.3.4 separated optimization completed
   ğŸ“Š Scalping: 72.2% | Swing: 81.4%
   ```

2. learning_config.jsonåŒ…å«separated params
   ```json
   {
     "global": {
       "min_risk_reward": 1.5
     },
     "scalping_params": {
       "min_risk_reward": 1.3,
       "min_signal_score": 50
     },
     "swing_params": {
       "min_risk_reward": 1.8,
       "min_signal_score": 60
     }
   }
   ```

3. Barké€šçŸ¥æ˜¾ç¤ºçš„è¦æ±‚æ›´åˆç†
   ```
   Before: è¦æ±‚2.6 (= 2.0Ã—1.3, ä»globalè¯»å–)
   After:  è¦æ±‚2.34 (= 1.8Ã—1.3, ä»swing_paramsè¯»å–)
   ```

4. å®é™…å¼€ä»“ç‡æå‡
   - è¦æ±‚é™ä½ â†’ æ›´å®¹æ˜“æ»¡è¶³æ¡ä»¶ â†’ å¼€ä»“æœºä¼šå¢åŠ 

======================================================================
ã€æŠ€æœ¯ç»†èŠ‚ã€‘
======================================================================

ğŸ” ä¸ºä»€ä¹ˆä¹‹å‰æ²¡æœ‰ä½¿ç”¨separated paramsï¼Ÿ

1. V7.7.0åªä¼˜åŒ–globalå‚æ•°
2. V8.3.4ä¼˜åŒ–å¹¶ä¿å­˜äº†separated params
3. ä½†å®é™…äº¤æ˜“ä»£ç ä»ä»globalè¯»å–
4. **ç¼ºå°‘signal_typeå‚æ•°ä¼ é€’**

ğŸ¯ V8.3.11çš„å…³é”®æ”¹è¿›:

1. get_learning_config_for_symbol æ·»åŠ  signal_type å‚æ•°
2. æ ¹æ®signal_typeè¯»å–å¯¹åº”çš„ç­–ç•¥å‚æ•°
3. ä¿æŒå‘åå…¼å®¹ï¼šå¦‚æœseparated paramsä¸å­˜åœ¨ï¼Œfallbackåˆ°global

======================================================================
ã€é…å¥—ä¿®å¤ã€‘
======================================================================

âœ… V8.3.10.2: ä¿®å¤ Series å¸ƒå°”æ­§ä¹‰é”™è¯¯ï¼ˆ5å¤„ï¼‰
âœ… V8.3.11: ä¿®å¤å®é™…äº¤æ˜“è¯»å– separated paramsï¼ˆ2å¤„ï¼‰

å®Œæ•´ä¿®å¤æµç¨‹:
  1. V8.3.10 â†’ ä¿®å¤å˜é‡å†²çª
  2. V8.3.10.1 â†’ è¡¥å……ä¿®å¤ _simulate_trade_with_params
  3. V8.3.10.2 â†’ æœ€ç»ˆä¿®å¤ analyze_opportunities max/min
  4. V8.3.11 â†’ ä¿®å¤å®é™…äº¤æ˜“å‚æ•°è¯»å– â­

======================================================================
âœ… V8.3.11 ä¿®å¤å®Œæˆï¼ç°åœ¨å¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨äº†ï¼
======================================================================

ğŸ“Œ é¢„æœŸæ•ˆæœï¼š
  - V8.3.4ä¼˜åŒ–çš„separated paramså°†è¢«æ­£ç¡®ä½¿ç”¨
  - å®é™…å¼€ä»“è¦æ±‚ä¸å›æµ‹ç»“æœä¸€è‡´
  - Barké€šçŸ¥æ›´å‡†ç¡®åæ˜ å‚æ•°è¦æ±‚
  - å¼€ä»“æœºä¼šå¯èƒ½å¢åŠ ï¼ˆå› ä¸ºè¦æ±‚æ›´åˆç†ï¼‰

ğŸš€ ä¸‹ä¸€æ­¥ï¼š
  1. ä¸Šä¼ åˆ°æœåŠ¡å™¨
  2. é‡æ–°è¿è¡Œå›æµ‹
  3. è§‚å¯ŸBarké€šçŸ¥çš„å˜åŒ–
  4. éªŒè¯learning_config.jsonå†…å®¹

