━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚀 服务器回测操作指令（一键执行）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【操作】复制下面的命令，粘贴到终端执行：

ssh root@iZj6c5hxis8jq7nvotae08Z "bash ~/10-23-bot/fix_and_backtest.sh"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 脚本会自动执行
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 停止AI进程（deepseek + qwen）
2. 拉取最新代码（包含V8.5.2.4.62修复）
3. 验证V8.5.2.4.62是否应用
4. 运行回测（Phase 1-4完整流程）
5. 完成后重启AI进程

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 预期结果
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

修复前（当前服务器状态）:
  Phase 2 参数组合测试: 0.00% ❌
  Phase 2 Baseline: 1.01% ❌
  Phase 3利润: 6-8% ⚠️

修复后（预期）:
  Phase 2 参数组合测试: ~12% ✅
  Phase 2 Baseline: ~12% ✅
  Phase 3利润: 10-15% ✅

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📖 详细说明
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

- 用户4个问题的大白话回答：README_Fix_0_Profit.md
- 完整技术诊断报告：ds/V8.5.2.4.74_问题诊断与解决方案.md
- 修复脚本源码：fix_and_backtest.sh

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 核心要点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

问题根源：
  服务器代码未更新 → V8.5.2.4.62修复未应用
  → TP/SL参数传入None → 无法计算利润 → 0.00%

修复原理：
  Python的.get()陷阱：
    d = {'key': None}
    d.get('key', 'default')  # 返回None（不会fallback）❌
    d.get('key') or 'default'  # 返回'default' ✅

不会过拟合：
  TP/SL是风控参数（安全带松紧度），不是预测参数
  Phase 4有前向验证（训练集70% vs 验证集30%）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

